var Qt=Object.defineProperty,Xt=Object.defineProperties;var Kt=Object.getOwnPropertyDescriptors;var Pt=Object.getOwnPropertySymbols;var ea=Object.prototype.hasOwnProperty,ta=Object.prototype.propertyIsEnumerable;var Lt=(s,a,t)=>a in s?Qt(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,be=(s,a)=>{for(var t in a||(a={}))ea.call(a,t)&&Lt(s,t,a[t]);if(Pt)for(var t of Pt(a))ta.call(a,t)&&Lt(s,t,a[t]);return s},wt=(s,a)=>Xt(s,Kt(a));import{bl as it,bm as aa,s as _,r as h,c as g,v as x,b as n,e as c,g as zt,y as ce,u as e,k as l,p as q,w as M,l as de,f as v,i as me,_ as he,m as T,n as H,A as sa,bn as la,t as oa,bo as na,bp as ia,aW as Me,aP as fe,b7 as Ne,as as rt,d as W,bq as Ge,bd as Bt,aa as Be,x as pe,F as ae,aZ as st,br as lt,j as Ce,ao as Qe,bs as Ze,am as Xe,ay as ot,ax as nt,C as ke,L as ye,a3 as It,a as Fe,aU as ra,aR as Pe,b6 as Ee,ag as Ie,bt as St,b4 as xe,bu as ca,b5 as Re,H as ue,J as Ke,K as Te,z as He,aX as Et,aY as At,h as vt,bv as ua,bw as da,bx as et,by as jt,D as tt,bz as ft,bf as ze,bA as Nt,at,bB as dt,ar as pa,an as ma,bC as _a,bD as Dt,bE as Ft,b8 as Le,bF as ga,aH as va,b3 as fa,bG as ba,bH as bt,bI as ht,au as ha,bJ as ya,bK as ka,bL as xa,ad as Ca,ai as Ta}from"./stepForm.72e57ca4.js";import{e as $a,f as Se,m as Pa}from"./eventListForm.dc0c4704.js";import{a as La,_ as Ae}from"./catalogForm.218d5ae4.js";function $e(s,a){let t=a!==""?JSON.parse(s.translations)[a]:JSON.parse(s.translations);if(it in t)return t[it];let o=Object.keys(t),i=Object.keys(t).map(m=>m.length>2?m.slice(0,2):m),p="";for(let m=0;m<i.length;m++){if(aa===o[m]&&t[o[m]]){p=t[o[m]];break}i[m]===it&&t[o[m]]&&(p=t[o[m]])}return p}function ct(s,a){return s.translations&&JSON.parse(s.translations)[a]&&$e(s,a)?$e(s,a):s[a]}function we(s){return s.translations&&JSON.parse(s.translations).name&&$e(s,"name")?$e(s,"name"):s.name}function wa(s){return s.translations&&$e(s,"")?$e(s,""):s.name}function Cr(s){return s.translations&&$e(s,"")?$e(s,""):s.content}function Sa(s){return s.translations&&$e(s,"name")?$e(s,"name"):s.label}function Da(s){return s.translations&&$e(s,"")?$e(s,""):s.label}function Oe(s){return s.translations&&JSON.parse(s.translations).description&&$e(s,"description")?$e(s,"description"):s.description}function Tr(s){s.services&&s.services.length&&s.services.forEach(a=>{a.name=we(a),a.description=Oe(a),a.extras.forEach(t=>{t.name=we(t),t.description=Oe(t)})}),s.locations&&s.locations.length&&s.locations.forEach(a=>{a.name=we(a),a.description=Oe(a)}),s.packages&&s.packages.length&&s.packages.forEach(a=>{a.name=we(a),a.description=Oe(a),a.bookable.forEach(t=>{t.service.name=we(t.service),t.service.description=Oe(t.service),"extras"in t.service&&t.service.extras.forEach(o=>{o.name=we(o),o.description=Oe(o)})})}),s.categories&&s.categories.length&&s.categories.forEach(a=>{a.name=we(a),a.serviceList.forEach(t=>{t.name=we(t),t.description=Oe(t),t.extras.forEach(o=>{o.name=we(o),o.description=Oe(o)})})}),s.events&&s.events.length&&s.events.forEach(a=>{a.name=we(a),a.description=Oe(a),a.extras.forEach(t=>{t.name=we(t),t.description=Oe(t)})}),s.customFields&&s.customFields.length&&s.customFields.forEach(a=>{a.label=Sa(a),a.options.forEach(t=>{t.label=Da(t)})}),s.employees&&s.employees.length&&s.employees.forEach(a=>{a.firstName=ct(a,"firstName"),a.lastName=ct(a,"lastName"),a.description=ct(a,"description")})}const Fa={props:{ready:{type:Boolean,default:!0}},setup(s){let a=_("amColors",h({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#1A2C37",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF"})),t=g(()=>({"--am-c-caph-text":a.value.colorMainText,"--am-c-caph-heading-text":a.value.colorMainHeadingText,"--am-c-caph-text-op15":x(a.value.colorMainText,.15)}));return(o,i)=>(n(),c("div",{class:"am-caph__main",style:ce(e(t))},[zt(o.$slots,"default")],4))}};const Ma={key:0},Oa={key:1},za={key:2},Ba={name:"MainProfileFooter"},Ia=Object.assign(Ba,{props:{parentWidth:{type:Number,default:1200},display:{type:String,default:"first"},loading:{type:Boolean,default:!1},customizedLabels:{type:Object,default:()=>({})},deleteFooterType:{type:String,default:"plain"},saveFooterButton:{type:String,default:"filled"},passFooterButton:{type:String,default:"filled"}},setup(s){const a=s,t=_("labels");function o(y){return Object.keys(a.customizedLabels).length&&a.customizedLabels[y]?a.customizedLabels[y]:t[y]}const i=_("settings");let p=_("deleteProfileDialog",h(!1)),m=_("saveProfileChanges",()=>{}),r=_("changeProfilePassword",()=>{}),u=_("amColors"),d=g(()=>({"--am-c-cappf-bgr":u.value.colorMainBgr,"--am-c-cappf-text":u.value.colorMainText,"--am-c-cappf-text-op15":x(u.value.colorMainText,.15)}));return(y,F)=>(n(),c("div",{class:"am-cappf",style:ce(e(d))},[l("div",{class:H(["am-cappf__options",{"am-only-one":s.display==="second"||!e(i).roles.allowCustomerDeleteProfile}])},[s.display==="first"&&e(i).roles.allowCustomerDeleteProfile?(n(),c("div",Ma,[q(he,{category:"danger",size:e(a).parentWidth<=360?"small":"default",type:e(a).deleteFooterType,class:"am-cappf__delete",disabled:s.loading,onClick:F[0]||(F[0]=$=>me(p)?p.value=!0:p=!0)},{default:M(()=>[de(v(o("delete_profile")),1)]),_:1},8,["size","type","disabled"])])):T("",!0),s.display==="first"?(n(),c("div",Oa,[q(he,{type:e(a).saveFooterButton,size:e(a).parentWidth<=360?"small":"default",disabled:s.loading,onClick:F[1]||(F[1]=$=>e(m)())},{default:M(()=>[de(v(o("save_changes")),1)]),_:1},8,["type","size","disabled"])])):T("",!0),s.display==="second"?(n(),c("div",za,[q(he,{type:e(a).passFooterButton,size:e(a).parentWidth<=360?"small":"default",disabled:s.loading,onClick:F[2]||(F[2]=$=>e(r)())},{default:M(()=>[de(v(o("change_password")),1)]),_:1},8,["type","size","disabled"])])):T("",!0)],2)],4))}});const Ea=l("span",{class:"am-icon-calendar"},null,-1),Aa={class:"am-date-picker__input-inner"},ja={class:"am-date-picker__input-start"},Na=l("span",{class:"am-date-picker__input-separator"}," - ",-1),Va={class:"am-date-picker__input-end"},Ya={props:{id:{type:String},modelValue:{type:[String,Array,Object,Number]},type:{type:String,default:"date"},defaultValue:{type:[String,Array,Object,Number]},valueFormat:{type:String},value:{type:[String,Array,Object,Number]},format:{type:String},editable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},size:{type:String,default:"default",validator(s){return["default","medium","small","mini","micro"].includes(s)}},clearable:{type:Boolean,default:!1},name:{type:String,default:""},placeholder:{type:String,default:"Select Date"},popperClass:{type:String,default:""},teleported:{type:Boolean,default:!0},clearIcon:{type:[String,Object],default:sa},prefixIcon:{type:[String,Object],default:la},disabledDate:{type:Function,default:()=>{}},lang:{type:String,default:""},customInputDisplay:{type:Boolean,default:!1}},emits:["change","input","visible-change","remove-tag","clear","blur","focus","calendar-change","update:modelValue"],setup(s,{emit:a}){const t=s;let{modelValue:o}=oa(t),i=g({get:()=>o.value,set:d=>{a("update:modelValue",d)}});const p=h(null);function m(){p.value&&p.value.focus()}let r=_("amColors"),u=g(()=>({"--am-c-primary":r.value.colorPrimary,"--am-c-success":r.value.colorSuccess,"--am-c-error":r.value.colorError,"--am-c-warning":r.value.colorWarning,"--am-c-main-bgr":r.value.colorMainBgr,"--am-c-main-heading-text":r.value.colorMainHeadingText,"--am-c-main-text":r.value.colorMainText,"--am-c-sb-bgr":r.value.colorSbBgr,"--am-c-sb-text":r.value.colorSbText,"--am-c-inp-bgr":r.value.colorInpBgr,"--am-c-inp-border":r.value.colorInpBorder,"--am-c-inp-text":r.value.colorInpText,"--am-c-inp-placeholder":r.value.colorInpPlaceHolder,"--am-c-drop-bgr":r.value.colorDropBgr,"--am-c-drop-text":r.value.colorDropText,"--am-c-drop-text-op10":x(r.value.colorDropText,.1),"--am-c-drop-text-op50":x(r.value.colorDropText,.5),"--am-c-drop-text-op80":x(r.value.colorDropText,.8),"--am-c-drop-border":r.value.colorDropBorder,"--am-c-btn-prim":r.value.colorBtnPrim,"--am-c-btn-prim-text":r.value.colorBtnPrimText,"--am-c-btn-sec":r.value.colorBtnSec,"--am-c-btn-sec-text":r.value.colorBtnSecText,"--am-c-btn-danger":r.value.colorBtnDanger,"--am-c-btn-danger-text":r.value.colorBtnDangerText,"--am-c-skeleton-op20":x(r.value.colorMainText,.2),"--am-c-skeleton-op60":x(r.value.colorMainText,.6),"--am-c-skeleton-sb-op20":x(r.value.colorSbText,.2),"--am-c-skeleton-sb-op60":x(r.value.colorSbText,.6)}));return(d,y)=>{const F=na,$=ia;return n(),c("div",{class:H(["am-date-picker-wrapper",`am-date-picker--${s.size}`])},[t.customInputDisplay&&t.type==="daterange"&&e(i).length?(n(),c("div",{key:0,class:H(["am-date-picker__input",`am-date-picker--${s.size}`]),onClick:m},[Ea,l("div",Aa,[l("span",ja,v(e(Me)(e(fe)(e(i)[0]).format("YYYY-MM-DD"))),1),Na,l("span",Va,v(e(Me)(e(fe)(e(i)[1]).format("YYYY-MM-DD"))),1)])],2)):T("",!0),q($,{locale:e($a)(t.lang)},{default:M(()=>[q(F,Ne(d.$props,{id:s.id,ref_key:"amDatePicker",ref:p,modelValue:e(i),"onUpdate:modelValue":y[0]||(y[0]=S=>me(i)?i.value=S:i=S),type:s.type,value:s.value,"prefix-icon":s.prefixIcon,"popper-class":s.popperClass,placeholder:s.placeholder,"clear-icon":s.clearIcon,"default-value":s.defaultValue,clearable:s.clearable,"disabled-date":s.disabledDate,"value-format":s.valueFormat,format:s.format,editable:s.editable,class:["am-date-picker",[`am-date-picker--${s.size}`,{"am-date-picker--disabled":s.disabled},{"am-date-picker--custom":t.type==="daterange"&&t.customInputDisplay}]],"popper-style":e(u),onInput:y[1]||(y[1]=S=>d.$emit("input",S)),onChange:y[2]||(y[2]=S=>d.$emit("change",S)),onBlur:y[3]||(y[3]=S=>d.$emit("blur",S)),onFocus:y[4]||(y[4]=S=>d.$emit("focus",S)),onCalendarChange:y[5]||(y[5]=S=>d.$emit("calendar-change",S))}),null,16,["id","modelValue","type","value","prefix-icon","popper-class","placeholder","clear-icon","default-value","clearable","disabled-date","value-format","format","editable","popper-style","class"])]),_:1},8,["locale"])],2)}}};const Ua={class:"am-oit__wrapper"},Wa={class:"am-oit"},qa={class:"am-oit__img"},Za={key:0},Ra={class:"am-oit__content am-oit__content-short"},Ha={class:"am-oit__data"},Ja={class:"am-oit__data-label-name"},Ga=["innerHTML"],Qa={style:{display:"flex"}},Xa=l("span",{class:"am-icon-circle-info"},null,-1),Ka=[Xa],es={class:"am-dialog__title"},ts={class:"am-dialog__body"},as={class:"am-dialog__body-heading"},ss={class:"am-oit__img"},ls={key:0},os={class:"am-dialog__body-heading__text"},ns={class:"am-dialog__body-heading__text-name"},is=["innerHTML"],rs={inheritAttrs:!1},cs=Object.assign(rs,{props:{identifier:{type:[String,Number],required:!0},imageThumb:{type:String,default:""},label:{type:[String,Number],default:""},description:{type:String,default:""},price:{type:[String,Number],default:""},dialogTitle:{type:String,default:""},dialogButtonText:{type:String,default:""},badge:{type:[String,Number,Object]}},emits:["click"],setup(s,{emit:a}){const t=s;let o=h(!1);const i=$=>{$.stopPropagation(),o.value=!0},p=()=>{o.value=!1,a("click",t.identifier)};function m($){return $=$.replace(/<\/p>/g," </p>").replace(/<\/h1>/g," </h1>").replace(/<\/h2>/g," </h2>").replace(/<\/h3>/g," </h3>").replace(/<\/h4>/g," </h4>"),$=$.replace(/<\/li>/g," </li>"),$}function r(){if(t.label){let $="";return t.label.split(" ").forEach(S=>{$+=S.charAt(0).toUpperCase()}),$}}let u=_("primDescBtnType","filled"),d=_("amColors"),y=g(()=>({"--am-oit-c-main-bgr":d.value.colorMainBgr,"--am-oit-c-main-btn-color":d.value.colorBtnPrim,"--am-oit-c-main-btn-color-text":d.value.colorBtnPrimText,"--am-oit-c-main-heading-text":d.value.colorMainHeadingText,"--am-oit-c-main-heading-text-op90":x(d.value.colorMainHeadingText,.9),"--am-oit-c-main-text":d.value.colorMainText,"--am-c-option-img-text":d.value.colorMainBgr})),F=g(()=>({"--am-c-option-selected":d.value.colorPrimary}));return($,S)=>(n(),c("span",Ua,[l("span",Wa,[l("span",qa,[l("span",{class:"am-oit__img-placeholder",style:ce({backgroundImage:`url(${t.imageThumb})`})},[t.imageThumb?T("",!0):(n(),c("span",Za,v(r()),1))],4)]),l("span",Ra,[l("span",Ha,[l("span",{class:H(`am-oit__data-label ${s.badge?"am-oit__data-label-wrap":""}`)},[l("span",Ja,v(s.label),1),s.badge?(n(),c("span",{key:0,class:"am-oit__data-label-badge",style:ce({background:s.badge.color})},v(s.badge.content),5)):T("",!0)],2),!s.badge&&e(rt)(s.description)?(n(),c("span",{key:0,class:"am-oit__data-description",innerHTML:m(s.description)},null,8,Ga)):T("",!0)]),l("span",Qa,[t.price?(n(),c("span",{key:0,class:"am-oit__price",style:ce(e(F))},v(t.price),5)):T("",!0),e(rt)(s.description)?(n(),c("span",{key:1,class:"am-oit__info-trigger",onClick:i},Ka)):T("",!0)])])]),e(rt)(s.description)?(n(),W(La,{key:0,modelValue:e(o),"onUpdate:modelValue":S[0]||(S[0]=I=>me(o)?o.value=I:o=I),"custom-class":"am-option-template-dialog am-dialog ql-description","append-to-body":!0,"custom-styles":e(y),"destroy-on-close":!0,"align-center":!0,"modal-class":"am-dialog-employee-description"},{title:M(()=>[l("span",es,v(s.dialogTitle),1)]),footer:M(()=>[q(he,{type:e(u),category:"primary",onClick:p},{default:M(()=>[de(v(s.dialogButtonText),1)]),_:1},8,["type"])]),default:M(()=>[l("div",ts,[l("div",as,[l("span",ss,[l("span",{class:"am-oit__img-placeholder",style:ce({backgroundImage:`url(${t.imageThumb})`})},[t.imageThumb?T("",!0):(n(),c("span",ls,v(r()),1))],4)]),l("div",os,[l("span",ns,v(s.label),1),s.badge?(n(),c("span",{key:0,class:"am-dialog__body-heading__text-badge",style:ce({background:s.badge.color})},v(s.badge.content),5)):T("",!0)])]),l("div",{class:"am-dialog__body-content",innerHTML:s.description},null,8,is)])]),_:1},8,["modelValue","custom-styles"])):T("",!0)]))}});function us(s,a,t){let o={};return s.forEach(i=>{a===""&&i.periods.forEach(d=>{d.periodStart=Ge(d.periodStart),d.periodEnd=Ge(d.periodEnd)});let m=fe(i.periods[0].periodStart,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD"),r=t.getters.getSettings.general.usedLanguages.map(d=>d.length>2?d.slice(0,2):d);(t.getters.getSettings.general.usedLanguages.indexOf(t.getters.getLocalLanguage)!==-1||r.indexOf(t.getters.getLocalLanguage.split("_")[0])!==-1)&&(i.name=we(i),i.customTickets.forEach(d=>{d.name=wa(d)})),m in o||(o[m]={date:m,events:[]}),i.full&&i.status==="approved"?i.status="full":i.upcoming&&i.status==="approved"&&(i.status="upcoming"),i.bookings.forEach(d=>{let y=JSON.parse(JSON.stringify(i));y.bookings=[d],o[m].events.push(y)})}),o}function Vt(s){let a=0;return s.bookings.forEach(t=>{if(["approved","pending"].includes(t.status)){let o=0;if(t.ticketsData.length>0)for(let p=0;p<t.ticketsData.length;p++)o+=t.ticketsData[p].persons*t.ticketsData[p].price;else o+=s.price;let i=Bt(s,t.coupon,t.tax?t.tax[0]:null,o,!1);a+=i.price-i.discount+i.tax}}),a>=0?a:0}function ds(s){let a=[];return s.forEach(t=>{let o=fe(t.periodStart.split(" ")[0],"YYYY-MM-DD"),i=fe(t.periodEnd.split(" ")[0],"YYYY-MM-DD"),p=t.periodStart.split(" ")[1].slice(0,5),m=t.periodEnd.split(" ")[1].slice(0,5);m==="00:00"&&(m="24:00",i.subtract(1,"days"));let r=[];for(;o.isSameOrBefore(i);)r.push(o.format("YYYY-MM-DD")),o.add(1,"days");r.forEach(u=>{a.push({date:u,startTime:p,endTime:m,periodStart:u+" "+p,periodEnd:u+" "+m,zoomLink:s.length>1&&t.zoomMeeting?t.zoomMeeting.joinUrl:"",lessonSpaceLink:s.length>1&&t.lessonSpace?t.lessonSpace:"",googleMeetLink:s.length>1&&t.googleMeetUrl?t.googleMeetUrl:""})})}),a}function ps(s){let a=[];return s.bookings.forEach(t=>{["approved","pending"].includes(t.status)&&t.ticketsData&&t.ticketsData.length&&t.ticketsData.forEach(o=>{a.push({persons:o.persons,price:o.price,name:s.customTickets.find(i=>i.id===o.eventTicketId).name})})}),a}function ms(s,a){let t=s.getters["entities/getLocations"];if(a.locationId&&t.length){let o=t.find(i=>i.id===a.locationId);return typeof o!="undefined"?o:null}else if(a.customLocation)return{address:"",name:a.customLocation};return null}let ut=[],Ye=["1788FB","4BBEC6","FBC22D","FA3C52","D696B8","689BCA","26CC2B","FD7E35","E38587","774DFB","31CDF3","6AB76C","FD5FA1","A697C5"];function $r(s,a,t){if(a!==null){let o=t===!0?a.firstName+" "+a.lastName:a.name;if(typeof o!="undefined")return a.pictureThumbPath=a.pictureThumbPath||_s(s,o),a.pictureThumbPath}}function pt(s){return s.split(" ").map(a=>a.charAt(0)).join("").toUpperCase().substring(0,3).replace(/[^\w\s]/g,"")}function _s(s,a,t={},o=!1){let i=pt(a),p=Math.floor(Math.random()*Ye.length),m=Ye[p];return ut.push(Ye[p]),Ye.splice(p,1),Ye.length===0&&(Ye=ut,ut=[]),o?t.firstName?s.wpAmeliaPluginURL+"public/img/default-employee.svg":t.latitude?s.wpAmeliaPluginURL+"public/img/default-location.svg":s.wpAmeliaPluginURL+"public/img/default-service.svg":location.protocol+"//via.placeholder.com/120/"+m+"/fff?text="+i}const gs={class:"am-msd__item-wrapper"},vs={class:"am-msd__item-inner"},fs={class:"am-msd__item-heading"},bs=l("div",{class:"am-msd__item-icon"},[l("span",{class:"am-icon-close"})],-1),hs=["onClick"],ys={class:"am-msd__item-inner"},ks={class:"am-msd__item-icon"},xs={class:"am-msd__item-heading"},Cs=l("div",{class:"am-msd__item-indicator"},[l("span",{class:"am-icon-arrow-big-right"})],-1),Ts={key:0,class:"am-msd__item-divider"},$s={class:"am-msd__item-inner"},Ps=l("div",{class:"am-msd__item-icon"},[l("span",{class:"am-icon-logout"})],-1),Ls={class:"am-msd__item-heading"},ws={props:{visibility:{type:Boolean,required:!0},customizedLabels:{type:Object,default:()=>({})},monitor:{type:String,required:!0},menuItems:{type:Array,required:!0},customCss:{type:Object,default:()=>{}},width:{type:Number,default:300},position:{type:String,default:"right",validator(s){return["right","left","top","bottom"].includes(s)}}},emits:["click","update:visibility","logout"],setup(s,{emit:a}){const t=s;let o=_("labels");function i(u,d){a("click",{step:u,index:d}),a("update:visibility",!1)}function p(){a("update:visibility",!1)}function m(u){return Object.keys(t.customizedLabels).length&&t.customizedLabels[u]?t.customizedLabels[u]:o[u]}let r=g(()=>({"--am-mw-msd":`${t.width}px`}));return(u,d)=>(n(),W(st,{visibility:s.visibility,position:s.position,"custom-class":"am-msd","close-outside":!0,"custom-css":be(be({},s.customCss),e(r)),"onUpdate:visibility":d[1]||(d[1]=y=>e(a)("update:visibility",!1))},{footer:M(()=>[l("div",{class:"am-msd__item",onClick:d[0]||(d[0]=()=>e(a)("logout"))},[l("div",$s,[Ps,l("p",Ls,v(m("log_out")),1)])])]),default:M(()=>[l("div",gs,[l("div",{class:"am-msd__item",onClick:p},[l("div",vs,[q(Be,{name:"fade"},{default:M(()=>[l("p",fs,v(m("menu_title")),1)]),_:1}),q(Be,{name:"fade"},{default:M(()=>[bs]),_:1})])]),(n(!0),c(ae,null,pe(s.menuItems,(y,F)=>(n(),c(ae,{key:y.key},[l("div",{class:H(["am-msd__item",{selected:s.monitor===y.key}]),onClick:$=>i(y,F)},[l("div",ys,[l("div",ks,[l("span",{class:H(`am-icon-${y.icon}`)},null,2)]),q(Be,{name:"fade"},{default:M(()=>[l("p",xs,v(y.label),1)]),_:2},1024),q(Be,{name:"fade"},{default:M(()=>[Cs]),_:1})])],10,hs),F===0?(n(),c("div",Ts)):T("",!0)],64))),128))])]),_:1},8,["visibility","position","custom-css"]))}};const mt={props:{size:{type:String,default:"default"}},setup(s){const a=s,t=lt().cookies,o=_("settings");let i=_("cabinetType"),{bookingsCounterChanger:p}=_("bookingsCounterChanger",{bookingsCounterChanger:()=>{}});const m=Ce();let r=g({get:()=>m.getters["cabinet/getTimeZone"],set:$=>{m.commit("cabinet/setTimeZone",$||"")}});const u=_("timeZone"),d=_("timeZones");function y(){let $;o.general.showClientTimeZone?$=Ze():$=u.value,t.set("ameliaUserTimeZone",$,o.roles[i.value+"Cabinet"].tokenValidTime),p(),m.commit("cabinet/setTimeZone",$)}function F($){t.set("ameliaUserTimeZone",$,o.roles[i.value+"Cabinet"].tokenValidTime),p()}return($,S)=>(n(),W(Xe,{modelValue:e(r),"onUpdate:modelValue":S[0]||(S[0]=I=>me(r)?r.value=I:r=I),filterable:!0,placeholder:e(Ze)(),clearable:!0,size:e(a).size,"custom-class":"am-ctz","prefix-icon":"globe-watch",onClear:y,onChange:F},{default:M(()=>[(n(!0),c(ae,null,pe(e(d),(I,D)=>(n(),W(Qe,{key:D,value:I,label:I},{default:M(()=>[de(v(I),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","size"]))}};function Yt(){return"ameliaBooking"in window&&"cabinet"in window.ameliaBooking&&"disableAuthorizationHeader"in window.ameliaBooking.cabinet&&window.ameliaBooking.cabinet.disableAuthorizationHeader}function De(s){let a=s.getters["auth/getToken"];return a&&!Yt()?{headers:{Authorization:"Bearer "+a}}:{}}const Ss={key:0,class:"el-skeleton-item-wrapper-title"},Ds={name:"AuthSkeleton"},yt=Object.assign(Ds,{props:{centerFirst:{type:Boolean,default:!1},count:{type:Number,default:3},mainClass:{type:String,default:""}},setup(s){const a=s;return(t,o)=>{const i=ot,p=nt;return n(),W(p,{animated:"",class:H(["am-asi-el-skeleton",e(a).mainClass])},{template:M(()=>[e(a).centerFirst?(n(),c("div",Ss,[q(i,{variant:"rect"})])):T("",!0),(n(!0),c(ae,null,pe(new Array(e(a).count),m=>(n(),c("div",{key:m,class:"el-skeleton-item-wrapper"},[q(i,{variant:"rect"})]))),128))]),_:1},8,["class"])}}});const Fs={class:"am-asi__top"},Ms={class:"am-asi__header"},Os={class:"am-asi__text"},zs={class:"am-asi__footer"},Bs={class:"am-asi__footer-text"},Is={name:"AuthSignIn"},Es=Object.assign(Is,{setup(s){let a=Ce();const t=lt().cookies,o=_("settings");let i=_("amCustomize");const p=_("labels"),m=_("localLanguage");let r=g(()=>o.general.usedLanguages.includes(m.value)),u=g(()=>{let A=ke(be({},p)),R=i.value.signIn.translations;return R&&Object.keys(R).forEach(oe=>{R[oe][m.value]&&r.value?A[oe]=R[oe][m.value]:R[oe].default&&(A[oe]=R[oe].default)}),A}),d={components:{IconComponent:Ae},template:'<IconComponent icon="email"></IconComponent>'},y={components:{IconComponent:Ae},template:'<IconComponent icon="password"></IconComponent>'},F=h(null),$=h({email:g({get:()=>a.getters["auth/getEmail"],set:A=>{a.commit("auth/setEmail",A||"")}}),password:g({get:()=>a.getters["auth/getPassword"],set:A=>{a.commit("auth/setPassword",A||"")}})}),S=h({email:[{required:!0,message:u.value.enter_email_or_username_warning,trigger:"submit"}],password:[{required:!0,message:u.value.enter_password_warning,trigger:"submit"}]}),I=h({email:{template:Se.text,props:{itemName:"email",label:u.value.email_or_username,iconStart:ye(d),placeholder:"",class:"am-asi__item"}},password:{template:Se.text,props:{itemName:"password",itemType:"password",showPassword:!0,label:u.value.password,iconStart:ye(y),placeholder:"",class:"am-asi__item"}}}),D=_("pageKey"),k=_("cabinetType"),V=g(()=>a.getters.getLoading),b=g(()=>a.getters["auth/getProfileDeleted"]),U=h(!1),G=h("");function Z(A,R){let oe=St("token");A?Q(A,!1,!1,!1):oe?Q(oe,!0,!1,R):Q("",!1,!0,!1)}function Q(A,R,oe,se){let Y={cabinetType:k.value,changePass:se};oe&&(Y.checkIfWpUser=!0);let j=a.getters["auth/getPassword"],te=a.getters["auth/getEmail"];!A&&j&&te&&(Y.password=j,Y.email=te),R&&(Y.token=A),xe.post("/users/authenticate",Y,A!==null&&!Yt()?{headers:{Authorization:"Bearer "+A}}:{}).then(ee=>{if("authentication_required"in ee.data.data){o.roles[k.value+"Cabinet"].loginEnabled||(D.value="sendAccessLink");return}"token"in ee.data.data&&(t.set("ameliaToken",ee.data.data.token,o.roles[k.value+"Cabinet"].tokenValidTime,null,null,!0),t.set("ameliaUserEmail",ee.data.data.user.email,o.roles[k.value+"Cabinet"].tokenValidTime,null,null,!0),a.commit("auth/setToken",ee.data.data.token)),St("token")&&window.history.replaceState(null,null,ca(window.location.href,"token")),a.commit("auth/setProfile",ee.data.data.user),"set_password"in ee.data.data&&ee.data.data.set_password||"change_password"in ee.data.data&&ee.data.data.change_password?D.value="setPassword":a.commit("auth/setAuthenticated",!0)}).catch(ee=>{if(!("data"in ee.response.data)&&"message"in ee.response.data){U.value=!0,G.value=ee.response.data.message;return}"invalid_credentials"in ee.response.data.data&&(U.value=!0,G.value=u.value.invalid_credentials)}).finally(()=>{a.commit("setLoading",!1)})}function K(){F.value.validate(A=>{if(A)a.commit("setLoading",!0),Q(null,!1,!1,!1);else return!1})}It(()=>{a.commit("setLoading",!0)}),Fe(()=>{a.getters["auth/getLoggedOut"]?Z():Z(t.get("ameliaToken"),"changePass"in ra(window.location.href))});let B=_("containerWidth"),O=g(()=>Pe(B.value)),P=_("amFonts"),w=_("amColors"),L=g(()=>({"--am-c-primary":w.value.colorPrimary,"--am-c-success":w.value.colorSuccess,"--am-c-error":w.value.colorError,"--am-c-warning":w.value.colorWarning,"--am-c-main-bgr":w.value.colorMainBgr,"--am-c-main-heading-text":w.value.colorMainHeadingText,"--am-c-main-text":w.value.colorMainText,"--am-c-main-text-op70":x(w.value.colorMainText,.7),"--am-c-main-text-op60":x(w.value.colorMainText,.6),"--am-c-main-text-op40":x(w.value.colorMainText,.4),"--am-c-main-text-op25":x(w.value.colorMainText,.25),"--am-c-inp-bgr":w.value.colorInpBgr,"--am-c-inp-border":w.value.colorInpBorder,"--am-c-inp-text":w.value.colorInpText,"--am-c-inp-placeholder":w.value.colorInpPlaceHolder,"--am-c-btn-prim":w.value.colorBtnPrim,"--am-c-btn-prim-text":w.value.colorBtnPrimText,"--am-c-skeleton-op20":x(w.value.colorMainText,.2),"--am-c-skeleton-op60":x(w.value.colorMainText,.6),"--am-font-family":P.value.fontFamily,"--am-c-scroll-op30":x(w.value.colorPrimary,.3),"--am-c-scroll-op10":x(w.value.colorPrimary,.1)}));return(A,R)=>{const oe=Re;return e(V)?(n(),W(e(yt),{key:1,count:4,"center-first":!0,"main-class":"am-asi-sign-in am-asi"})):(n(),c("div",{key:0,class:"am-asi",style:ce(e(L))},[l("div",Fs,[e(b)?(n(),W(Ee,{key:0,class:"am-asi__top-message am-asi__top-message-success",type:"success",title:e(u).profile_deleted,description:"","show-icon":!0,closable:!0,onClose:R[0]||(R[0]=se=>e(a).commit("auth/setProfileDeleted",!1))},null,8,["title"])):T("",!0),e(U)?(n(),W(Ee,{key:1,class:"am-asi__top-message am-asi__top-message-error",type:"error",title:e(G),description:"","show-icon":!0,closable:!0,onClose:R[1]||(R[1]=se=>e(a).commit("auth/setProfileDeleted",!1))},null,8,["title"])):T("",!0),l("div",Ms,v(e(u).welcome_back),1),l("div",Os,v(e(u).enter_credentials),1)]),q(oe,{ref_key:"authFormRef",ref:F,model:e($),rules:e(S),"label-position":"top",class:H(["am-asi__form",e(O)])},{default:M(()=>[(n(!0),c(ae,null,pe(e(I),(se,Y)=>(n(),W(Ie(se.template),Ne({key:Y,ref_for:!0,ref:"customerCollectorRef",modelValue:e($)[Y],"onUpdate:modelValue":j=>e($)[Y]=j},se.props,{onEnter:K}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),q(he,{class:"am-asi__btn",type:e(i).signIn.options.signInBtn.buttonType,onClick:K},{default:M(()=>[de(v(e(u).sign_in),1)]),_:1},8,["type"]),l("div",zs,[l("span",Bs,v(e(u).forgot_your_password),1),l("span",{class:"am-asi__footer-link",onClick:R[2]||(R[2]=se=>me(D)?D.value="sendAccessLink":D="sendAccessLink")},v(e(u).reset_password),1)])],4))}}});const As={class:"am-asi__top"},js={class:"am-asi__header"},Ns={class:"am-asi__text"},Vs={key:0,class:"am-asi__footer"},Ys={name:"AuthReset"},Us=Object.assign(Ys,{setup(s){let a=Ce();const t=_("settings");let o=_("amCustomize");const i=_("labels"),p=_("localLanguage");let m=g(()=>t.general.usedLanguages.includes(p.value)),r=g(()=>{let Z=ke(be({},i)),Q=o.value.accessLink.translations;return Q&&Object.keys(Q).forEach(K=>{Q[K][p.value]&&m.value?Z[K]=Q[K][p.value]:Q[K].default&&(Z[K]=Q[K].default)}),Z}),u=h(null),d=h({email:g({get:()=>a.getters["auth/getEmail"],set:Z=>{a.commit("auth/setEmail",Z||"")}})}),y=h({email:[{required:!0,message:r.value.enter_email_warning,trigger:"submit"}]}),F=h({email:{template:Se.text,props:{itemName:"email",itemType:"email",label:r.value.email,placeholder:"",class:"am-asi__item"}}}),$=_("pageKey"),S=_("cabinetType"),I=g(()=>a.getters.getLoading);function D(){u.value.validate(Z=>{if(Z)a.commit("setLoading",!0),xe.post("/users/customers/reauthorize",{email:a.getters["auth/getEmail"],locale:window.localeLanguage[0],cabinetType:S.value}).then(()=>{$.value="sendAccessLinkProcess"}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1)});else return!1})}let k=_("containerWidth"),V=g(()=>Pe(k.value)),b=_("amFonts"),U=_("amColors"),G=g(()=>({"--am-c-primary":U.value.colorPrimary,"--am-c-success":U.value.colorSuccess,"--am-c-error":U.value.colorError,"--am-c-warning":U.value.colorWarning,"--am-c-main-bgr":U.value.colorMainBgr,"--am-c-main-heading-text":U.value.colorMainHeadingText,"--am-c-main-text":U.value.colorMainText,"--am-c-main-text-op70":x(U.value.colorMainText,.7),"--am-c-main-text-op60":x(U.value.colorMainText,.6),"--am-c-main-text-op40":x(U.value.colorMainText,.4),"--am-c-main-text-op25":x(U.value.colorMainText,.25),"--am-c-inp-bgr":U.value.colorInpBgr,"--am-c-inp-border":U.value.colorInpBorder,"--am-c-inp-text":U.value.colorInpText,"--am-c-inp-placeholder":U.value.colorInpPlaceHolder,"--am-c-btn-prim":U.value.colorBtnPrim,"--am-c-btn-prim-text":U.value.colorBtnPrimText,"--am-c-skeleton-op20":x(U.value.colorMainText,.2),"--am-c-skeleton-op60":x(U.value.colorMainText,.6),"--am-font-family":b.value.fontFamily,"--am-c-scroll-op30":x(U.value.colorPrimary,.3),"--am-c-scroll-op10":x(U.value.colorPrimary,.1)}));return(Z,Q)=>{const K=Re;return e(I)?(n(),W(e(yt),{key:1,count:4,"center-first":!0,"main-class":"am-asi"})):(n(),c("div",{key:0,class:"am-asi",style:ce(e(G))},[l("div",As,[l("div",js,v(e(r).access_link_send),1),l("div",Ns,v(e(r).access_link_send_description),1)]),q(K,{ref_key:"authFormRef",ref:u,model:e(d),rules:e(y),"label-position":"top",class:H(["am-asi__form",e(V)])},{default:M(()=>[(n(!0),c(ae,null,pe(e(F),(B,O)=>(n(),W(Ie(B.template),Ne({key:O,ref_for:!0,ref:"customerCollectorRef",modelValue:e(d)[O],"onUpdate:modelValue":P=>e(d)[O]=P},B.props,{onEnter:D}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),q(he,{class:"am-asi__btn",type:e(o).accessLink.options.sendBtn.buttonType,onClick:D},{default:M(()=>[de(v(e(r).send),1)]),_:1},8,["type"]),e(t).roles[e(S)+"Cabinet"].loginEnabled?(n(),c("div",Vs,[l("span",{class:"am-asi__footer-link",onClick:Q[0]||(Q[0]=B=>me($)?$.value="signIn":$="signIn")},v(e(r).sign_in),1)])):T("",!0)],4))}}});const Ws={class:"am-asi__top"},qs={class:"am-asi__header"},Zs={class:"am-asi__text"},Rs={class:"am-asi__email"},Hs={class:"am-asi__footer"},Js={class:"am-asi__footer-text"},Gs={name:"AuthResetProcess"},Qs=Object.assign(Gs,{setup(s){let a=Ce();const t=_("settings");let o=_("amCustomize");const i=_("labels"),p=_("localLanguage");let m=g(()=>t.general.usedLanguages.includes(p.value)),r=g(()=>{let S=ke(be({},i)),I=o.value.accessLinkSuccess.translations;return I&&Object.keys(I).forEach(D=>{I[D][p.value]&&m.value?S[D]=I[D][p.value]:I[D].default&&(S[D]=I[D].default)}),S}),u=g(()=>a.getters["auth/getEmail"]),d=_("pageKey"),y=_("amFonts"),F=_("amColors"),$=g(()=>({"--am-c-primary":F.value.colorPrimary,"--am-c-success":F.value.colorSuccess,"--am-c-error":F.value.colorError,"--am-c-warning":F.value.colorWarning,"--am-c-main-bgr":F.value.colorMainBgr,"--am-c-main-heading-text":F.value.colorMainHeadingText,"--am-c-main-text":F.value.colorMainText,"--am-c-main-text-op70":x(F.value.colorMainText,.7),"--am-c-main-text-op60":x(F.value.colorMainText,.6),"--am-c-main-text-op40":x(F.value.colorMainText,.4),"--am-c-main-text-op25":x(F.value.colorMainText,.25),"--am-c-inp-bgr":F.value.colorInpBgr,"--am-c-inp-border":F.value.colorInpBorder,"--am-c-inp-text":F.value.colorInpText,"--am-c-inp-placeholder":F.value.colorInpPlaceHolder,"--am-c-btn-prim":F.value.colorBtnPrim,"--am-c-btn-prim-text":F.value.colorBtnPrimText,"--am-c-skeleton-op20":x(F.value.colorMainText,.2),"--am-c-skeleton-op60":x(F.value.colorMainText,.6),"--am-font-family":y.value.fontFamily,"--am-c-scroll-op30":x(F.value.colorPrimary,.3),"--am-c-scroll-op10":x(F.value.colorPrimary,.1)}));return(S,I)=>(n(),c("div",{class:"am-asi",style:ce(e($))},[l("div",Ws,[l("div",qs,v(e(r).access_link_send_check),1),l("div",Zs,v(e(r).access_link_send_click),1),l("div",Rs,v(e(u)),1)]),l("div",Hs,[l("span",Js,v(e(r).access_link_send_inbox),1),l("span",{class:"am-asi__footer-link",onClick:I[0]||(I[0]=D=>me(d)?d.value="sendAccessLink":d="sendAccessLink")},v(e(r).access_link_send_retry),1)])],4))}});const Xs={class:"am-asi__top"},Ks={class:"am-asi__header"},el={class:"am-asi__text"},tl={name:"AuthNewPass"},al=Object.assign(tl,{setup(s){let a=Ce();const t=_("settings");let o=_("amCustomize");const i=_("labels"),p=_("localLanguage");let m=g(()=>t.general.usedLanguages.includes(p.value)),r=g(()=>{let G=ke(be({},i)),Z=o.value.setPass.translations;return Z&&Object.keys(Z).forEach(Q=>{Z[Q][p.value]&&m.value?G[Q]=Z[Q][p.value]:Z[Q].default&&(G[Q]=Z[Q].default)}),G}),u=h(null),d=h({newPassword:g({get:()=>a.getters["auth/getNewPassword"],set:G=>{a.commit("auth/setNewPassword",G||"")}}),confirmPassword:g({get:()=>a.getters["auth/getConfirmPassword"],set:G=>{a.commit("auth/setConfirmPassword",G||"")}})}),y=h({newPassword:[{required:!0,message:r.value.new_password_required,trigger:"submit"},{min:4,message:r.value.new_password_length,trigger:"submit"}],confirmPassword:[{required:!0,message:r.value.new_password_required,trigger:"submit"},{min:4,message:r.value.new_password_length,trigger:"submit"},{validator:()=>a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"],message:r.value.passwords_not_match,trigger:"submit"}]}),F=h({newPassword:{template:Se.text,props:{itemName:"newPassword",itemType:"password",showPassword:!0,label:r.value.new_password_colon,placeholder:"",minLength:3,class:"am-asi__item"}},confirmPassword:{template:Se.text,props:{itemName:"confirmPassword",itemType:"password",showPassword:!0,label:r.value.new_password_colon_retype,placeholder:"",minLength:3,class:"am-asi__item"}}}),$=_("cabinetType"),S=g(()=>a.getters.getLoading);function I(){u.value.validate(G=>{if(G&&a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"]){let Z=a.getters["auth/getProfile"];a.commit("setLoading",!0),xe.post("/users/"+$.value+"s/"+Z.id,{password:a.getters["auth/getNewPassword"]},Object.assign(De(a),{params:{source:"cabinet-"+$.value}})).then(()=>{a.commit("auth/setAuthenticated",!0)}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1)})}else return!1})}let D=_("containerWidth"),k=g(()=>Pe(D.value)),V=_("amFonts"),b=_("amColors"),U=g(()=>({"--am-c-primary":b.value.colorPrimary,"--am-c-success":b.value.colorSuccess,"--am-c-error":b.value.colorError,"--am-c-warning":b.value.colorWarning,"--am-c-main-bgr":b.value.colorMainBgr,"--am-c-main-heading-text":b.value.colorMainHeadingText,"--am-c-main-text":b.value.colorMainText,"--am-c-main-text-op70":x(b.value.colorMainText,.7),"--am-c-main-text-op60":x(b.value.colorMainText,.6),"--am-c-main-text-op40":x(b.value.colorMainText,.4),"--am-c-main-text-op25":x(b.value.colorMainText,.25),"--am-c-inp-bgr":b.value.colorInpBgr,"--am-c-inp-border":b.value.colorInpBorder,"--am-c-inp-text":b.value.colorInpText,"--am-c-inp-placeholder":b.value.colorInpPlaceHolder,"--am-c-btn-prim":b.value.colorBtnPrim,"--am-c-btn-prim-text":b.value.colorBtnPrimText,"--am-c-skeleton-op20":x(b.value.colorMainText,.2),"--am-c-skeleton-op60":x(b.value.colorMainText,.6),"--am-font-family":V.value.fontFamily,"--am-c-scroll-op30":x(b.value.colorPrimary,.3),"--am-c-scroll-op10":x(b.value.colorPrimary,.1)}));return(G,Z)=>{const Q=Re;return e(S)?(n(),W(e(yt),{key:1,count:4,"center-first":!0,"main-class":"am-asi"})):(n(),c("div",{key:0,class:"am-asi",style:ce(e(U))},[l("div",Xs,[l("div",Ks,v(e(r).new_password_set),1),l("div",el,v(e(r).new_password_set_description),1)]),q(Q,{ref_key:"authFormRef",ref:u,model:e(d),rules:e(y),"label-position":"top",class:H(["am-asi__form",e(k)])},{default:M(()=>[(n(!0),c(ae,null,pe(e(F),(K,B)=>(n(),W(Ie(K.template),Ne({key:B,ref_for:!0,ref:"customerCollectorRef",modelValue:e(d)[B],"onUpdate:modelValue":O=>e(d)[B]=O},K.props,{onEnter:I}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),q(he,{class:"am-asi__btn",type:e(o).setPass.options.newPassBtn.buttonType,onClick:I},{default:M(()=>[de(v(e(r).new_password_set_action),1)]),_:1},8,["type"])],4))}}});const sl={class:"am-asi__top"},ll=l("div",{class:"am-asi__img"},[l("span",{class:"am-icon-check"})],-1),ol={class:"am-asi__header"},nl={class:"am-asi__text"},il={name:"ChangePassSuccess"},rl=Object.assign(il,{setup(s){const a=_("settings");let t=_("amCustomize");const o=_("labels"),i=_("localLanguage");let p=g(()=>a.general.usedLanguages.includes(i.value)),m=g(()=>{let F=ke(be({},o)),$=t.value.setPassSuccess.translations;return $&&Object.keys($).forEach(S=>{$[S][i.value]&&p.value?F[S]=$[S][i.value]:$[S].default&&(F[S]=$[S].default)}),F}),r=_("pageKey"),u=_("amFonts"),d=_("amColors"),y=g(()=>({"--am-c-primary":d.value.colorPrimary,"--am-c-success":d.value.colorSuccess,"--am-c-error":d.value.colorError,"--am-c-warning":d.value.colorWarning,"--am-c-main-bgr":d.value.colorMainBgr,"--am-c-main-heading-text":d.value.colorMainHeadingText,"--am-c-main-text":d.value.colorMainText,"--am-c-main-text-op70":x(d.value.colorMainText,.7),"--am-c-main-text-op60":x(d.value.colorMainText,.6),"--am-c-main-text-op40":x(d.value.colorMainText,.4),"--am-c-main-text-op25":x(d.value.colorMainText,.25),"--am-c-btn-prim":d.value.colorBtnPrim,"--am-c-btn-prim-text":d.value.colorBtnPrimText,"--am-c-skeleton-op20":x(d.value.colorMainText,.2),"--am-c-skeleton-op60":x(d.value.colorMainText,.6),"--am-font-family":u.value.fontFamily,"--am-c-scroll-op30":x(d.value.colorPrimary,.3),"--am-c-scroll-op10":x(d.value.colorPrimary,.1)}));return(F,$)=>(n(),c("div",{class:"am-asi",style:ce(e(y))},[l("div",sl,[ll,l("div",ol,v(e(m).new_password_changed),1),l("div",nl,v(e(m).new_password_changed_description),1)]),q(he,{class:"am-asi__btn",type:e(t).setPassSuccess.options.signInBtn.buttonType,onClick:$[0]||($[0]=S=>me(r)?r.value="signIn":r="signIn")},{default:M(()=>[de(v(e(m).sign_in),1)]),_:1},8,["type"])],4))}}),cl={name:"AuthWrapper"},ul=Object.assign(cl,{setup(s){const a=_("settings");let t=h({signIn:ye(Es),sendAccessLink:ye(Us),sendAccessLinkProcess:ye(Qs),setPassword:ye(al),changeSuccess:ye(rl)}),o=_("originKey"),i=h("signIn");ue("pageKey",i);const p=h(a.customizedData?a.customizedData.fonts:Ke.fonts);ue("amFonts",p);let m=g(()=>a.customizedData&&o.value in a.customizedData?a.customizedData[o.value].colors:Ke[o.value].colors);return ue("amColors",m),(r,u)=>(n(),W(Ie(e(t)[e(i)])))}});const dl={class:"am-csd__inner"},pl={class:"am-csd__header"},ml={class:"am-csd__header-text"},_l={class:"am-csd__content"},gl={class:"am-csd__footer"},vl={name:"DeleteProfile"},fl=Object.assign(vl,{props:{visibility:{type:Boolean,required:!0},customizedLabels:{type:Object,default:()=>({})},customizedOptions:{type:Object,default:()=>({})}},emits:["close","deleteProfile"],setup(s,{emit:a}){const t=s;let o=_("containerWidth");const i=_("labels");function p(d){return Object.keys(t.customizedLabels).length&&t.customizedLabels[d]?t.customizedLabels[d]:i[d]}let m=_("amFonts"),r=_("amColors"),u=g(()=>({"--am-c-csd-text":r.value.colorMainText,"--am-c-csd-bgr":r.value.colorMainBgr,"--am-c-csd-text-op10":x(r.value.colorMainText,.1),"--am-font-family":m.value.fontFamily}));return(d,y)=>(n(),W(st,{visibility:e(t).visibility,"custom-class":"am-csd am-csd__cancel",style:ce(e(u)),position:"center"},{footer:M(()=>[l("div",gl,[q(he,{category:"secondary",size:e(o)<=360?"small":"default",type:e(t).customizedOptions.closeBtn.buttonType,onClick:y[1]||(y[1]=()=>{a("close")})},{default:M(()=>[de(v(p("close")),1)]),_:1},8,["size","type"]),q(he,{category:"danger",size:e(o)<=360?"small":"default","loading-icon":"loading",type:e(t).customizedOptions.confirmBtn.buttonType,onClick:y[2]||(y[2]=()=>{a("deleteProfile")})},{default:M(()=>[de(v(p("delete")),1)]),_:1},8,["size","type"])])]),default:M(()=>[l("div",dl,[l("div",pl,[l("div",ml,v(p("delete_profile")),1),l("div",{class:"am-csd__header-btn",onClick:y[0]||(y[0]=()=>{a("close")})},[q(Ae,{icon:"close"})])]),l("div",_l,[l("p",null,v(p("delete_profile_description")),1)])])]),_:1},8,["visibility","style"]))}});const Mt={props:{pageWidth:{type:Number,default:768},count:{type:[Number,String],default:2},itemDirection:{type:String,default:"row",validator(s){return["row","row-reverse","column","column-reverse","initial","revert","unset"].includes(s)}}},setup(s){const a=s;let t=g(()=>Pe(a.pageWidth)),o=_("amColors"),i=g(()=>({"--am-c-skeleton-op20":x(o.value.colorMainText,.2),"--am-c-skeleton-op60":x(o.value.colorMainText,.6),"--am-c-flex-direction":a.itemDirection}));return(p,m)=>{const r=ot,u=nt;return n(),W(u,{animated:"",class:"am-cps",style:ce(e(i))},{template:M(()=>[(n(!0),c(ae,null,pe(new Array(e(a).count),d=>(n(),c("div",{key:d,class:H(["am-cps__item",e(t)])},[q(r,{class:"am-cps__item-label",variant:"rect"}),q(r,{class:"am-cps__item-input",variant:"rect"})],2))),128))]),_:1},8,["style"])}}};const bl=l("span",{class:"am-icon-checkmark-circle-full"},null,-1),hl={name:"CabinetProfile",key:"profile"},yl=Object.assign(hl,{setup(s){let a=Ce(),t=g(()=>a.getters.getLoading),o=h(null),i=h(0),p=_("sidebarCollapsed");window.addEventListener("resize",m);function m(){o.value&&(i.value=o.value.offsetWidth)}Te(p,N=>{N?setTimeout(()=>{r()},1500):setTimeout(()=>{r()},500)});function r(){i.value=o.value.offsetWidth}Fe(()=>{He(()=>{i.value=o.value.offsetWidth})});let u=g(()=>Pe(i.value));const d=_("settings");let y=_("cabinetType"),F=_("amCustomize");const $=_("labels"),S=_("localLanguage");let I=g(()=>d.general.usedLanguages.includes(S.value));function D(N,f){return f&&Object.keys(f).forEach(C=>{f[C][S.value]&&I.value?N[C]=f[C][S.value]:f[C].default&&(N[C]=f[C].default)}),N}let k=g(()=>{let N=ke(be({},$)),f=F.value.profile.translations;return D(N,f)});function V(N){let f={},C=F.value[N].translations;return D(f,C)}let b=g(()=>F.value.profile.options),U=h("first"),G=h("");function Z(){Y.value=!1,G.value=""}let Q=h(null),K=h(!1),B=h({firstName:g({get:()=>a.getters["auth/getProfile"].firstName,set:N=>{a.commit("auth/setProfileFirstName",N||"")}}),lastName:g({get:()=>a.getters["auth/getProfile"].lastName,set:N=>{a.commit("auth/setProfileLastName",N||"")}}),email:g({get:()=>a.getters["auth/getProfile"].email,set:N=>{a.commit("auth/setProfileEmail",N||"")}}),phone:g({get:()=>a.getters["auth/getProfile"].phone,set:N=>{a.commit("auth/setProfilePhone",N||"")}}),birthday:g({get:()=>a.getters["auth/getProfile"].birthday?a.getters["auth/getProfile"].birthday:"",set:N=>{a.commit("auth/setProfileBirthday",N?fe(N).format("YYYY-MM-DD"):"")}})}),O=h({firstName:{template:Se.text,props:{itemName:"firstName",label:k.value.first_name_colon,placeholder:k.value.enter_first_name,class:g(()=>`am-capi__item ${u.value}`)}},lastName:{template:Se.text,props:{itemName:"lastName",label:k.value.last_name_colon,placeholder:k.value.enter_last_name,class:g(()=>`am-capi__item ${u.value}`)}},email:{template:Se.text,props:{itemName:"email",label:k.value.email_colon,placeholder:k.value.enter_email,class:g(()=>`am-capi__item ${u.value}`)}},phone:{countryPhoneIso:g({get:()=>a.getters["auth/getProfile"].countryPhoneIso?a.getters["auth/getProfile"].countryPhoneIso:"",set:N=>{a.commit("auth/setProfileCountryPhoneIso",N?N.toLowerCase():"")}}),template:Se.phone,props:{itemName:"phone",label:k.value.phone_colon,placeholder:k.value.enter_phone,defaultCode:g(()=>a.getters["auth/getProfile"].countryPhoneIso?a.getters["auth/getProfile"].countryPhoneIso:""),phoneError:g(()=>K.value),whatsAppLabel:k.value.whatsapp_opt_in_text,isWhatsApp:d.notifications.whatsAppEnabled&&d.notifications.whatsAppAccessToken&&d.notifications.whatsAppBusinessID&&d.notifications.whatsAppPhoneID,class:g(()=>`am-capi__item ${u.value}`)}},birthday:{template:Se.datepicker,props:{itemName:"birthday",label:k.value.date_of_birth,placeholder:k.value.enter_date_of_birth,clearable:!0,readOnly:!1,class:g(()=>`am-capi__item am-capi__item-birthday ${u.value}`)}}}),P=h({firstName:[{required:!0,message:k.value.enter_first_name_warning,trigger:"submit"}],lastName:[{required:b.value.lastName.required,message:k.value.enter_last_name_warning,trigger:"submit"}],email:[{required:b.value.email.required,type:"email",message:k.value.enter_valid_email_warning,trigger:"submit"}],phone:[{required:b.value.phone.required,message:k.value.enter_phone_warning,trigger:"submit"}],birthday:[{required:b.value.birthday.required,message:k.value.enter_date_of_birth_warning,trigger:"submit"}]}),w=h(!1);ue("deleteProfileDialog",w);function L(){a.commit("auth/setProfileFirstName",B.value.firstName?B.value.firstName.trim():""),a.commit("auth/setProfileLastName",B.value.lastName?B.value.lastName.trim():""),a.commit("auth/setProfileEmail",B.value.email?B.value.email.trim():""),Q.value.validate(N=>{if(N){G.value=k.value.profile_data_success;let f=a.getters["auth/getProfile"];a.commit("setLoading",!0),xe.post("/users/"+y.value+"s/"+f.id,f,De(a)).finally(()=>{a.commit("setLoading",!1),Y.value=!0,b.value.phone.required&&B.value.phone&&(K.value=!1)})}else return b.value.phone.required&&!B.value.phone&&(K.value=!0),!1})}ue("saveProfileChanges",L);let A=h(null),R=h({newPass:g({get:()=>a.getters["auth/getNewPassword"],set:N=>{a.commit("auth/setNewPassword",N||"")}}),confirmPass:g({get:()=>a.getters["auth/getConfirmPassword"],set:N=>{a.commit("auth/setConfirmPassword",N||"")}})}),oe=h({newPass:{template:Se.text,props:{itemName:"newPass",itemType:"password",showPassword:!0,label:k.value.new_password_colon,placeholder:"",minLength:3,class:g(()=>`am-capp__item ${u.value}`)}},confirmPass:{template:Se.text,props:{itemName:"confirmPass",itemType:"password",showPassword:!0,label:k.value.new_password_colon_retype,placeholder:"",minLength:3,class:g(()=>`am-capp__item ${u.value}`)}}}),se=h({newPass:[{required:!0,message:k.value.new_password_required,trigger:"submit"},{min:4,message:k.value.new_password_length,trigger:"submit"}],confirmPass:[{required:!0,message:k.value.new_password_required,trigger:"submit"},{min:4,message:k.value.new_password_length,trigger:"submit"},{validator:()=>a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"],message:k.value.passwords_not_match,trigger:"submit"}]}),Y=h(!1);function j(){Y.value=!1}function te(){A.value.validate(N=>{if(N){G.value="Password changed Successfully";let f=a.getters["auth/getProfile"];a.commit("setLoading",!0),xe.post("/users/"+y.value+"s/"+f.id,{password:a.getters["auth/getNewPassword"]},De(a)).then(()=>{a.commit("auth/setNewPassword",""),a.commit("auth/setConfirmPassword","")}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1),Y.value=!0})}else return!1})}ue("changeProfilePassword",te);function ee(){w.value=!1,a.commit("auth/setProfileDeleted",!0),a.dispatch("auth/logout")}function ie(){a.commit("setLoading",!0);let N=a.getters["auth/getProfile"]?a.getters["auth/getProfile"].id:null;if(!N)return;let f={email:"",firstName:k.value.customer,lastName:N,phone:"",birthday:"",gender:"",externalId:"",password:""};const C=lt().cookies;xe.post("/users/customers/"+N,Object.assign(De(a),f)).then(()=>{a.commit("auth/setProfile",{}),C.remove("ameliaUserEmail"),a.commit("setLoading",!1),ee()}).catch(E=>{a.commit("setLoading",!1),console.log(E)})}let le=_("amColors"),X=g(()=>({"--am-c-capi-primary":le.value.colorPrimary,"--am-c-capi-text":le.value.colorMainText,"--am-c-capi-text-op10":x(le.value.colorMainText,.1)}));return(N,f)=>{const C=Re,E=Et,J=At;return n(),c("div",{ref_key:"pageContainer",ref:o,class:"am-capi",style:ce(e(X))},[e(Y)?(n(),W(Ee,{key:0,type:"success","show-border":!0,"close-after":5e3,"custom-class":"am-capi__alert",onClose:Z,onTriggerClose:Z},{title:M(()=>[bl,de(" "+v(e(G)),1)]),_:1})):T("",!0),q(J,{modelValue:e(U),"onUpdate:modelValue":f[0]||(f[0]=z=>me(U)?U.value=z:U=z),class:"am-capi__tabs",onTabClick:j},{default:M(()=>[q(E,{class:"am-capi__tabs-item",label:e(k).personal_info,name:"first"},{default:M(()=>[e(t)?(n(),W(Mt,{key:1,count:5,"page-width":e(i)},null,8,["page-width"])):(n(),c(ae,{key:0},[e(a).getters["auth/getProfile"]?(n(),W(C,{key:0,ref_key:"infoFormRef",ref:Q,model:e(B),rules:e(P),"label-position":"top",class:H(["am-capi__form",e(u)])},{default:M(()=>[(n(!0),c(ae,null,pe(e(F).profile.order,z=>(n(),c(ae,{key:z.id},[!e(b)[z.id]||e(b)[z.id].visibility?(n(),W(Ie(e(O)[z.id].template),Ne({key:0,ref_for:!0,ref:"customerCollectorRef",modelValue:e(B)[z.id],"onUpdate:modelValue":_e=>e(B)[z.id]=_e,countryPhoneIso:e(O)[z.id].countryPhoneIso,"onUpdate:countryPhoneIso":_e=>e(O)[z.id].countryPhoneIso=_e},e(O)[z.id].props),null,16,["modelValue","onUpdate:modelValue","countryPhoneIso","onUpdate:countryPhoneIso"])):T("",!0)],64))),128))]),_:1},8,["model","rules","class"])):T("",!0)],64))]),_:1},8,["label"]),q(E,{class:"am-capi__tabs-item",label:e(k).password_tab,name:"second"},{default:M(()=>[e(t)?(n(),W(Mt,{key:1,"item-direction":"column",count:2,"page-width":e(i)},null,8,["page-width"])):(n(),W(C,{key:0,ref_key:"passFormRef",ref:A,model:e(R),rules:e(se),"label-position":"top",class:H(["am-capi__form",e(u)])},{default:M(()=>[(n(!0),c(ae,null,pe(e(oe),(z,_e)=>(n(),W(Ie(z.template),Ne({key:z.props.itemName,ref_for:!0,ref:"customerPassCollectorRef",modelValue:e(R)[_e],"onUpdate:modelValue":je=>e(R)[_e]=je},z.props),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]))]),_:1},8,["label"])]),_:1},8,["modelValue"]),q(fl,{visibility:e(w),"customized-labels":V("deleteProfile"),"customized-options":e(F).deleteProfile.options,onClose:f[1]||(f[1]=z=>me(w)?w.value=!1:w=!1),onDeleteProfile:ie},null,8,["visibility","customized-labels","customized-options"]),q(Ia,{loading:e(t),display:e(U),"parent-width":e(i),"customized-labels":e(k),"save-footer-button":e(b).saveFooterButton.buttonType,"delete-footer-type":e(b).deleteFooterButton.buttonType,"pass-footer-button":e(b).passFooterButton.buttonType},null,8,["loading","display","parent-width","customized-labels","save-footer-button","delete-footer-type","pass-footer-button"])],4)}}});const kl={key:0,class:"am-capf__zone"},xl={class:"am-capf__menu"},Cl={key:2},Tl=l("span",{class:"am-icon-filter"},null,-1),$l={key:0},Pl={key:0,class:"am-capf__list"},Ll=["onClick"],wl=l("span",{class:"am-icon-close"},null,-1),Sl=[wl],Dl={name:"CabinetFilters"},kt=Object.assign(Dl,{props:{paramList:{type:[Object,Array],default:()=>[]},stepKey:{type:String,default:""},responsiveClass:{type:String,default:""},empty:{type:Boolean,default:!1}},emits:["changeFilters"],setup(s,{emit:a}){const t=s;let o=Ce(),i=g(()=>o.getters.getLoading),p=g(()=>t.stepKey==="packages"?"packagesList":t.stepKey);const m=_("settings");let r=_("amCustomize");const u=_("labels"),d=_("localLanguage");let y=g(()=>m.general.usedLanguages.includes(d.value)),F=g(()=>{let P=ke(be({},u));if(t.stepKey){let w=r.value[p.value].translations;w&&Object.keys(w).forEach(L=>{w[L][d.value]&&y.value?P[L]=w[L][d.value]:w[L].default&&(P[L]=w[L].default)})}return P});function $(P){return P==="services"?"service":P==="providers"?"employee":P==="locations"?"locations":P==="packages"?"shipment":P==="events"?"star-outline":""}function S(){a("changeFilters")}let I=_("containerWidth"),D=vt({components:{IconComponent:Ae},template:'<IconComponent icon="filter"/>'}),k=h(!1),V=h({dates:g({get:()=>o.getters["cabinetFilters/getDates"],set:P=>{ua(),o.commit("cabinetFilters/setDates",P),a("changeFilters")}}),services:g({get:()=>o.getters["cabinetFilters/getServices"],set:P=>{o.commit("cabinetFilters/setServices",P)}}),providers:g({get:()=>o.getters["cabinetFilters/getProviders"],set:P=>{o.commit("cabinetFilters/setProviders",P)}}),locations:g({get:()=>o.getters["cabinetFilters/getLocations"],set:P=>{o.commit("cabinetFilters/setLocations",P)}}),packages:g({get:()=>o.getters["cabinetFilters/getPackages"],set:P=>{o.commit("cabinetFilters/setPackages",P)}}),events:g({get:()=>o.getters["cabinetFilters/getEvents"],set:P=>{o.commit("cabinetFilters/setEvents",P)}})}),b=g(()=>t.stepKey==="events"?o.getters["cabinetFilters/getEventFiltersOption"]:t.stepKey==="packages"?o.getters["cabinetFilters/getPackageFilterOptions"]:o.getters["cabinetFilters/getAppointmentFilterOptions"]),U=g(()=>{let P=0;return Object.keys(b.value).forEach(w=>{b.value[w].length>0&&r.value[p.value].options[`${w}Filter`].visibility&&P++}),P});function G(P){let w=P.charAt(0).toUpperCase()+P.slice(1);o.commit(`cabinetFilters/set${w}`,[]),a("changeFilters")}let Z=g(()=>r.value[p.value].options),Q=g(()=>t.stepKey==="appointments"?Z.value.servicesFilter.visibility||Z.value.providersFilter.visibility||Z.value.locationsFilter.visibility:t.stepKey==="events"?Z.value.eventsFilter.visibility||Z.value.providersFilter.visibility||Z.value.locationsFilter.visibility:Z.value.packagesFilter.visibility||Z.value.servicesFilter.visibility||Z.value.providersFilter.visibility||Z.value.locationsFilter.visibility),K=g(()=>t.stepKey==="appointments"?!!(b.value.services.length||b.value.providers.length||b.value.locations.length):t.stepKey==="events"?!!(b.value.events.length||b.value.providers.length||b.value.locations.length):!!(b.value.packages.length||b.value.services.length||b.value.providers.length||b.value.locations.length)),B=_("amColors"),O=g(()=>({"--am-c-capf-heading-text":B.value.colorMainText,"--am-c-capf-text":B.value.colorInpText,"--am-c-capf-text-op10":x(B.value.colorInpText,.1),"--am-c-select-border":B.value.colorInpBorder,"--am-c-select-bgr":B.value.colorInpBgr}));return(P,w)=>e(i)?T("",!0):(n(),c("div",{key:0,class:"am-capf",style:ce(e(O))},[e(I)<=480&&e(Z).timeZone.visibility&&e(t).stepKey!=="packages"?(n(),c("div",kl,[q(mt,{size:"small"})])):T("",!0),l("div",xl,[e(I)<=480&&e(Z).timeZone.visibility&&e(t).stepKey==="packages"?(n(),W(mt,{key:0,size:"small"})):T("",!0),e(t).stepKey!=="packages"?(n(),W(Ya,{key:1,modelValue:e(V).dates,"onUpdate:modelValue":w[0]||(w[0]=L=>e(V).dates=L),type:"daterange",editable:!1,size:"small",clearable:!1,format:e(da)(),style:ce(e(O)),lang:e(d),class:"am-capf__menu-datepicker","custom-input-display":!0},null,8,["modelValue","format","style","lang"])):T("",!0),!e(t).empty&&e(Q)&&e(K)?(n(),c("div",Cl,[q(he,{icon:e(D),"icon-only":e(I)<=700,"custom-class":"am-capf__menu-btn",size:"small",category:"primary",type:e(Z).filterBtn?e(Z).filterBtn.buttonType:"filled",onClick:w[1]||(w[1]=L=>me(k)?k.value=!e(k):k=!e(k))},{default:M(()=>[Tl,e(I)>700?(n(),c("span",$l,v(e(F).filters),1)):T("",!0)]),_:1},8,["icon","icon-only","type"])])):T("",!0)]),q(Be,{name:"am-slide-fade"},{default:M(()=>[e(k)&&!e(t).empty?(n(),c("div",Pl,[(n(!0),c(ae,null,pe(Object.keys(e(b)),L=>(n(),c(ae,{key:L},[e(b)[L].length>0&&e(r)[e(p)].options[`${L}Filter`].visibility?(n(),c("span",{key:0,class:H(["am-capf__list-item",[{"am-selected":e(V)[L].length>0},`am-capf__list-item-${e(U)}`,e(t).responsiveClass]])},[q(Xe,{id:`am-select-${L}`,modelValue:e(V)[L],"onUpdate:modelValue":A=>e(V)[L]=A,multiple:!0,placeholder:e(F)[`${L}_dropdown`],"prefix-icon":$(L),"collapse-tags":!0,size:"small","popper-class":"am-filter-select-popper",onChange:S},{default:M(()=>[(n(!0),c(ae,null,pe(e(b)[L],A=>(n(),W(Qe,{key:A.id,value:A.id,label:A.firstName?A.firstName+" "+A.lastName:A.name},null,8,["value","label"]))),128))]),_:2},1032,["id","modelValue","onUpdate:modelValue","placeholder","prefix-icon"]),e(V)[L].length>0?(n(),c("span",{key:0,class:"am-capf__clear",onClick:A=>G(L)},Sl,8,Ll)):T("",!0)],2)):T("",!0)],64))),128))])):T("",!0)]),_:1})],4))}});function Fl(s,a){let t=s.getters["entities/getService"](a.serviceId),o=0,i=0;return a.bookings.forEach(p=>{if(["approved","pending"].includes(p.status)){let m=p.duration?p.duration:t.duration;m>o&&(o=m);let r=0;p.extras.forEach(u=>{r+=t.extras.find(y=>y.id===u.extraId).duration*u.quantity}),r>i&&(i=r)}}),o+i}function Ut(s,a){for(let t in s)s[t].appointments.forEach(o=>{let i={};o.bookings.forEach(m=>{m.customerId in i||(i[m.customerId]=[]),i[m.customerId][m.id]=m.status});let p={};for(let m in i)for(let r in i[m])(!(m in p)||i[m][r]==="approved"||i[m][r]==="pending")&&(p[m]=r);o.bookings.forEach(m=>{m.customerId in p&&parseInt(m.id)!==parseInt(p[m.customerId])||(a===""&&(o.bookingStart=Ge(o.bookingStart),o.bookingEnd=Ge(o.bookingEnd)),o.bookings=[m])})});if(a===""){let t={};for(let o in s)s[o].appointments.forEach(i=>{let p=i.bookingStart.split(" ")[0];p in t?t[p].appointments.push(i):t[p]={appointments:[i],date:p}});return t}return s}function Wt(s){let a=[];return s.forEach(t=>{if(["approved","pending"].includes(t.status)&&t.customFields){let o=JSON.parse(t.customFields);Object.keys(o).forEach(i=>{a.push({label:o[i].label,value:o[i].value})})}}),a}function Ml(s,a){let t=[];return s.forEach(o=>{["approved","pending"].includes(o.status)&&o.extras.forEach(i=>{t.push(Object.assign(i,a.extras.find(p=>p.id===i.extraId)))})}),t}const Ol={class:"am-cc__periods-date"},zl={class:"am-cc__periods-time"},Bl={key:0,class:"am-cc__periods-link__list"},Il=["href"],El=l("span",{class:"am-icon-link"},null,-1),Al=["href"],jl=l("span",{class:"am-icon-link"},null,-1),Nl=["href"],Vl=l("span",{class:"am-icon-link"},null,-1),Yl={name:"TemplatePeriods"},Ul=Object.assign(Yl,{props:{data:{type:[Array,Object,String]}},setup(s){const a=s,t=_("amLabels");let o=_("containerWidth"),i=g(()=>Pe(o.value));return(p,m)=>(n(),c("div",{class:H(["am-cc__periods",e(i)])},[(n(!0),c(ae,null,pe(e(a).data,(r,u)=>(n(),c("div",{key:u,class:"am-cc__periods-item"},[l("span",Ol,v(e(Me)(r.date)),1),l("span",zl,v(`${e(et)(r.startTime)} - ${e(et)(r.endTime)}`),1),r.googleMeetLink||r.zoomLink||r.lessonSpaceLink?(n(),c("div",Bl,[r.googleMeetLink?(n(),c("a",{key:0,class:"am-cc__periods-link",href:r.googleMeetLink,target:"_blank"},[El,de(" "+v(e(t).google_meet_link),1)],8,Il)):T("",!0),r.zoomLink?(n(),c("a",{key:1,class:"am-cc__periods-link",href:r.zoomLink,target:"_blank"},[jl,de(" "+v(e(t).zoom_link),1)],8,Al)):T("",!0),r.lessonSpaceLink?(n(),c("a",{key:2,class:"am-cc__periods-link",href:r.lessonSpaceLink,target:"_blank"},[Vl,de(" "+v(e(t).lesson_space_link),1)],8,Nl)):T("",!0)])):T("",!0)]))),128))],2))}});const Wl={class:"am-cc__extras-name"},ql={key:0,class:"am-cc__extras-duration"},Zl={key:1,class:"am-cc__extras-price"},Rl={key:2,class:"am-cc__extras-quantity"},Hl={name:"TemplateExtras"},Jl=Object.assign(Hl,{props:{data:{type:[Array,Object,String]}},setup(s){const a=s,t=_("amLabels");let o=_("containerWidth"),i=g(()=>Pe(o.value));return(p,m)=>(n(),c("div",{class:H(["am-cc__extras",e(i)])},[(n(!0),c(ae,null,pe(e(a).data,(r,u)=>(n(),c("div",{key:u,class:"am-cc__extras-item"},[l("span",Wl,v(r.name),1),r.duration||r.price||r.quantity?(n(),c("div",{key:0,class:H(["am-cc__extras-item__inner",[{"am-flex-space":!r.price&&r.duration},{"am-flex-end":!r.duration}]])},[r.duration?(n(),c("span",ql,v(e(jt)(r.duration,e(t).h,e(t).min)),1)):T("",!0),r.price?(n(),c("span",Zl,v(e(tt)(r.price)),1)):T("",!0),r.quantity?(n(),c("span",Rl," x"+v(r.quantity),1)):T("",!0)],2)):T("",!0)]))),128))],2))}});const Gl={class:"am-cc__tickets-item_inner"},Ql={class:"am-cc__tickets-name"},Xl={class:"am-cc__tickets-calc"},Kl={class:"am-cc__tickets-price"},eo={name:"TemplateTickets"},to=Object.assign(eo,{props:{data:{type:[Array,Object,String]}},setup(s){const a=s,t=_("amLabels");let o=_("containerWidth"),i=g(()=>Pe(o.value));return(p,m)=>(n(),c("div",{class:H(["am-cc__tickets",e(i)])},[(n(!0),c(ae,null,pe(e(a).data,(r,u)=>(n(),c("div",{key:u,class:"am-cc__tickets-item"},[l("div",Gl,[l("span",Ql,v(r.name),1),l("span",Xl,v(`${r.persons} ${r.persons>1?e(t).event_tickets:e(t).event_ticket} x ${e(tt)(r.price)}`),1)]),l("div",Kl,v(e(tt)(r.persons*r.price)),1)]))),128))],2))}});const ao=["innerHTML"],so={class:"am-cc__cf-value"},lo={class:"am-cc__cf-value__inner"},oo={name:"TemplateCustomFields"},no=Object.assign(oo,{props:{data:{type:[Array,Object,String]}},setup(s){const a=s;let t=_("containerWidth"),o=g(()=>Pe(t.value));function i(p){return p?Array.isArray(p)?p.length===0?"/":p.map(m=>typeof m=="object"&&m!==null&&!Array.isArray(m)?m.name||"/":m||"/").join(", "):p:"/"}return(p,m)=>(n(),c("div",{class:H(["am-cc__cf",e(o)])},[(n(!0),c(ae,null,pe(e(a).data,(r,u)=>(n(),c("div",{key:u,class:"am-cc__cf-item"},[l("span",{class:"am-cc__cf-name",innerHTML:r.label},null,8,ao),l("div",so,[l("span",lo,v(i(r.value)),1)])]))),128))],2))}});const io={class:"am-cc__employee-heading"},ro={class:"am-cc__employee-heading__inner"},co={class:"am-cc__employee-name"},uo=["innerHTML"],po={key:1,class:"am-cc__employee-wrapper"},mo={class:"am-cc__employee-heading"},_o={class:"am-cc__employee-heading__inner"},go={class:"am-cc__employee-name"},vo=["innerHTML"],fo={name:"TemplateEmployee"},bo=Object.assign(fo,{props:{data:{type:[Object,Array]}},setup(s){const a=s;let t=g(()=>!Array.isArray(a.data)),o=_("containerWidth"),i=g(()=>Pe(o.value));function p(u){let d=u.firstName.charAt(0).toUpperCase(),y=u.lastName.charAt(0).toUpperCase();return`${d}${y}`}function m(u){return u.pictureThumbPath?{backgroundImage:`url(${u.pictureThumbPath})`}:{}}function r(u){return u&&u.includes("<!-- Content -->")?u.slice(16).length:u?u.length:!1}return(u,d)=>(n(),c("div",{class:H(["am-cc__employee",e(i)])},[e(t)?(n(),c(ae,{key:0},[l("div",io,[l("span",{class:"am-cc__employee-img",style:ce(m(e(a).data))},[e(a).data.pictureThumbPath?T("",!0):(n(),c(ae,{key:0},[de(v(p(e(a).data)),1)],64))],4),l("div",ro,[l("span",co,v(`${e(a).data.firstName} ${e(a).data.lastName}`),1),e(a).data.badge?(n(),c("span",{key:0,class:"am-cc__employee-badge",style:ce({background:e(a).data.badge.color})},v(e(a).data.badge.content),5)):T("",!0)])]),e(a).data.description?(n(),c("div",{key:0,class:H(["am-cc__employee-desc",{"ql-description":e(a).data.description.includes("<!-- Content -->")}]),innerHTML:e(a).data.description},null,10,uo)):T("",!0)],64)):(n(),c("div",po,[(n(!0),c(ae,null,pe(e(a).data,y=>(n(),c(ae,{key:y.id},[l("div",mo,[l("span",{class:"am-cc__employee-img",style:ce(m(y))},[y.pictureThumbPath?T("",!0):(n(),c(ae,{key:0},[de(v(p(y)),1)],64))],4),l("div",_o,[l("span",go,v(`${y.firstName} ${y.lastName}`),1),y.badge?(n(),c("span",{key:0,class:"am-cc__employee-badge",style:ce({background:y.badge.color})},v(y.badge.content),5)):T("",!0)])]),r(y.description)?(n(),c("div",{key:0,class:H(["am-cc__employee-desc",{"ql-description":y.description.includes("<!-- Content -->")}]),innerHTML:y.description},null,10,vo)):T("",!0)],64))),128))]))],2))}});const ho={class:"am-cc__popover-inner"},yo={key:0,class:"am-cc__popover-heading"},ko={name:"CollapseCardPopoverTemplate"},qe=Object.assign(ko,{props:{headerText:{type:String,default:""},type:{type:String,required:!0},contentData:{type:[Array,Object,String],default:""}},setup(s){const a=s;let t=h({period:ye(Ul),extras:ye(Jl),ticket:ye(to),customField:ye(no),employee:ye(bo)}),o=_("amFonts"),i=_("amColors"),p=g(()=>({"--am-c-cc-primary":i.value.colorPrimary,"--am-c-cc-primary-op70":x(i.value.colorPrimary,.7),"--am-c-cc-success":i.value.colorSuccess,"--am-c-cc-success-op15":x(i.value.colorSuccess,.15),"--am-c-cc-bgr":i.value.colorMainBgr,"--am-c-cc-text":i.value.colorMainText,"--am-c-cc-text-op10":x(i.value.colorMainText,.1),"--am-c-cc-text-op15":x(i.value.colorMainText,.15),"--am-c-cc-text-op70":x(i.value.colorMainText,.7),"--am-c-cc-text-op80":x(i.value.colorMainText,.8),"--am-c-cc-text-op90":x(i.value.colorMainText,.9),"--am-c-scroll-op30":x(i.value.colorPrimary,.3),"--am-c-scroll-op10":x(i.value.colorPrimary,.1),"--am-font-family":o.value.fontFamily,"--am-rad-input":"6px","--am-fs-input":"15px"}));return(m,r)=>{const u=ft;return n(),W(u,{"show-arrow":!1,persistent:!1,width:"auto","popper-class":"am-cc__popover","popper-style":e(p),trigger:"click"},{reference:M(()=>[zt(m.$slots,"default")]),default:M(()=>[l("div",ho,[e(a).headerText?(n(),c("div",yo,v(e(a).headerText),1)):T("",!0),(n(),W(Ie(e(t)[e(a).type]),{class:"am-cc__popover-content",data:e(a).contentData},null,8,["data"]))])]),_:3},8,["popper-style"])}}});function xo(s){let a=Bt(null,s.coupon,s.tax?s.tax[0]:null,s.price-s.price/100*s.discount,!1);return a.price-a.discount+a.tax}const Ue=ke(window.wpAmeliaLabels);function Ot(s,a,t,o=null){t.type==="package"&&s.commit("cabinet/setPackageLoading",!0),t.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!0),t.type==="event"&&s.commit("cabinet/setEventsLoading",!0),s.commit("cabinet/setPaymentLinkLoader",t.bookings?t.bookings[0].id:t.id);let i=JSON.parse(JSON.stringify(t)),p=JSON.parse(JSON.stringify(s.getters["auth/getProfile"]));p.birthday=null,i.customer=p,i.type!=="package"?(i[i.type]=t,i.booking=t.bookings[0],i.paymentId=t.bookings[0].payments[0].id):i=Object.assign(i,i.package),xe.post("/payments/link",{data:i,paymentMethod:a}).then(m=>{!m.data.data.error&&m.data.data.paymentLink?window.location.href=m.data.data.paymentLink:s.commit("cabinet/setPaymentLinkError",{value:!0,type:t.type})}).catch(m=>{s.commit("cabinet/setPaymentLinkError",{value:!0,type:t.type})}).finally(()=>{s.commit("cabinet/setPaymentLinkLoader",null),t.type==="package"&&s.commit("cabinet/setPackageLoading",!1),t.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!1),t.type==="event"&&s.commit("cabinet/setEventsLoading",!1)})}function _t(s,a){if(s.type!=="package"&&(!s.bookings||s.bookings.length===0))return!1;a=JSON.parse(a);let t=a&&"payments"in a&&a.payments&&"paymentLinks"in a.payments&&a.payments.paymentLinks?a.payments.paymentLinks:ze.payments.paymentLinks,o=!1;switch(s.type){case"package":o=!s.end||fe(s.end,"YYYY-MM-DD HH:mm").isAfter(fe());break;case"appointment":o=fe(s.bookingStart,"YYYY-MM-DD HH:mm:ss").isAfter(fe())&&s.bookings[0].payments.length>0;break;case"event":o=fe(s.periods[s.periods.length-1].periodEnd,"YYYY-MM-DD HH:mm:ss").isAfter(fe())&&s.bookings[0].payments.length>0;break}return gt(ze).length&&ze&&t&&t.enabled&&o}function gt(s){typeof s=="string"&&(s=JSON.parse(s));let a=[];return s=s.payments,ze.payments.wc.enabled?a.push({value:"wc",label:Ue.wc}):ze.payments.mollie.enabled&&(!("mollie"in s)||s.mollie.enabled)?a.push({value:"mollie",label:Ue.on_line}):(ze.payments.payPal.enabled&&(!("payPal"in s)||s.payPal.enabled)&&a.push({value:"payPal",label:Ue.pay_pal}),ze.payments.stripe.enabled&&(!("stripe"in s)||s.stripe.enabled)&&a.push({value:"stripe",label:Ue.credit_card}),ze.payments.razorpay.enabled&&(!("razorpay"in s)||s.razorpay.enabled)&&a.push({value:"razorpay",label:Ue.razorpay}),ze.payments.square.enabled&&(!("square"in s)||s.square.enabled)&&a.push({value:"square",label:Ue.square})),a}function Je(s,a){switch(a.type){case"appointment":{let t=Nt(s,{price:a.bookings[0].price,persons:a.bookings[0].persons,aggregatedPrice:a.bookings[0].aggregatedPrice,extras:a.bookings[0].extras,serviceId:null,tax:a.bookings[0].tax,coupon:a.bookings[0].coupon},!1);return t.total-t.discount+t.tax>a.bookings[0].payments.filter(o=>o.status!=="refunded"&&o.status!=="pending").reduce((o,i)=>o+i.amount,0)}case"event":return Vt(a)>a.bookings[0].payments.filter(t=>t.status!=="refunded"&&t.status!=="pending").reduce((t,o)=>t+o.amount,0);case"package":return xo(a)>a.payments.filter(t=>t.status!=="refunded"&&t.status!=="pending").reduce((t,o)=>t+o.amount,0)}}const Co={class:"am-cc__edit"},To=["onClick"],$o={class:"am-cc__edit-text"},Po={name:"PaymentButton"},qt=Object.assign(Po,{props:{reservation:{type:Object,default:()=>{}},bookable:{type:Object,default:()=>{}},type:{type:String},btnSize:{type:String,default:"mini"},class:{type:String,default:""}},setup(s){const a=s;let t=Ce();const o=_("amLabels");let i=g(()=>gt(a.bookable.settings)),p=g(()=>t.getters["cabinet/getPaymentLinkLoader"]),m=vt({components:{IconComponent:Ae},template:'<IconComponent icon="arrow-down"></IconComponent>'}),r=h(!1);function u(D){D.stopPropagation(),i.value.length===1?Ot(t,i.value[0].value,a.reservation):r.value=!r.value}function d(){r.value=!1}let y=h(!1);function F(){y.value=!1}let $=_("amFonts"),S=_("amColors"),I=g(()=>({"--am-c-cc-primary":S.value.colorPrimary,"--am-c-cc-primary-op70":x(S.value.colorPrimary,.7),"--am-c-cc-error":S.value.colorError,"--am-c-cc-error-op15":x(S.value.colorError,.15),"--am-c-cc-warning":S.value.colorWarning,"--am-c-cc-warning-op15":x(S.value.colorWarning,.15),"--am-c-cc-success":S.value.colorSuccess,"--am-c-cc-success-op15":x(S.value.colorSuccess,.15),"--am-c-cc-bgr":S.value.colorMainBgr,"--am-c-cc-text":S.value.colorMainText,"--am-c-cc-text-op10":x(S.value.colorMainText,.1),"--am-c-cc-text-op15":x(S.value.colorMainText,.15),"--am-c-cc-text-op70":x(S.value.colorMainText,.7),"--am-c-cc-text-op90":x(S.value.colorMainText,.9),"--am-font-family":$.value.fontFamily,"--am-rad-input":"6px","--am-fs-input":"15px"}));return(D,k)=>{const V=ft;return e(_t)(e(a).reservation,e(a).bookable.settings)?(n(),W(V,{key:0,ref:"payRef",visible:e(r),"onUpdate:visible":k[0]||(k[0]=b=>me(r)?r.value=b:r=b),persistent:!1,"show-arrow":!1,"popper-class":"am-cc__popper","popper-style":e(I),trigger:"click"},{reference:M(()=>[q(he,{size:e(a).btnSize,type:e(a).type,suffix:e(i).length>1&&e(Je)(e(t),e(a).reservation)?e(m):"",class:H([{"am-button-single":e(i).length===1||!e(Je)(e(t),e(a).reservation)},e(a).class]),loading:!!e(p),"loading-icon":"loading",disabled:!e(Je)(e(t),e(a).reservation),onClick:u},{default:M(()=>[de(v(e(Je)(e(t),e(a).reservation)?e(o).pay_now_btn:e(o).paid),1)]),_:1},8,["size","type","suffix","class","loading","disabled"])]),default:M(()=>[at((n(),c("div",Co,[(n(!0),c(ae,null,pe(e(gt)(e(a).bookable.settings),b=>at((n(),c("div",{key:b.value,class:"am-cc__edit-item",onClick:U=>e(Ot)(e(t),b.value,e(a).reservation)},[l("span",$o,v(b.label),1)],8,To)),[[e(dt),d]])),128))])),[[e(dt),F]])]),_:1},8,["visible","popper-style"])):T("",!0)}}});const Lo={class:"am-cc__time"},wo={key:0,class:"am-cc__name"},So={key:0,class:"am-cc__name"},Do={class:"am-cc__edit"},Fo=l("span",{class:"am-icon-date-time"},null,-1),Mo={class:"am-cc__edit-text"},Oo=l("span",{class:"am-icon-clearable"},null,-1),zo={class:"am-cc__edit-text"},Bo={class:"am-cc__content-inner"},Io={class:"am-cc__data"},Eo=l("span",{class:"am-icon-user"},null,-1),Ao={class:"am-cc__data-text"},jo={key:1,class:"am-cc__data"},No=l("span",{class:"am-icon-payments"},null,-1),Vo={class:"am-cc__data-text"},Yo={key:2,class:"am-cc__data"},Uo=l("span",{class:"am-icon-clock"},null,-1),Wo={class:"am-cc__data-text"},qo={class:"am-cc__data"},Zo=l("span",{class:"am-icon-clock"},null,-1),Ro={class:"am-cc__data-text"},Ho={key:4,class:"am-cc__data link"},Jo=l("span",{class:"am-icon-link"},null,-1),Go=["href"],Qo={key:5,class:"am-cc__data link"},Xo=l("span",{class:"am-icon-link"},null,-1),Ko=["href"],en={key:6,class:"am-cc__data link"},tn=l("span",{class:"am-icon-link"},null,-1),an=["href"],sn={class:"am-cc__data"},ln=l("span",{class:"am-icon-border-plus"},null,-1),on={class:"am-cc__data-text"},nn={class:"am-cc__data"},rn=l("span",{class:"am-icon-file-text"},null,-1),cn={class:"am-cc__data-text"},un={class:"am-cc__data"},dn=l("span",{class:"am-icon-tickets"},null,-1),pn={class:"am-cc__data-text"},mn=l("span",{class:"am-icon-locations"},null,-1),_n=["href"],gn={key:1,class:"am-cc__data-text"},vn={name:"CollapseCard"},Zt=Object.assign(vn,{props:{start:{type:[String,Object,Array,Function],required:!0},name:{type:String,default:""},employee:{type:[Object,Array],default:()=>{}},location:{type:[String,Object],default:""},price:{type:Number,default:0},duration:{type:Number,default:0},periods:{type:Array,default:()=>{}},extras:{type:Array,default:()=>{}},tickets:{type:Array,default:()=>{}},customFields:{type:Array,default:()=>[]},googleMeetLink:{type:String,default:""},zoomLink:{type:String,default:""},lessonSpaceLink:{type:String,default:""},reservation:{type:Object,default:()=>{}},bookable:{type:Object,default:()=>{}},booking:{type:Object,default:()=>{}},isPackageBooking:{type:Boolean,default:!1},responsiveClass:{type:String,default:""},parentWidth:{type:Number,default:1200},customizedOptions:{type:Object,required:!0}},emits:["cancelBooking","rescheduling"],setup(s,{emit:a}){const t=s,o=_("settings"),i=_("amLabels");let p=h(!1);function m(I){I.stopPropagation(),p.value=!p.value}function r(){p.value=!1}function u(){a("cancelBooking",t.booking),p.value=!1}function d(){a("rescheduling",t.reservation,t.booking),p.value=!1}function y(I){return Array.isArray(I)?i.value.event_staff:!Array.isArray(I)&&I.rank&&I.rank==="organizer"?i.value.event_organizer:`${t.employee.firstName} ${t.employee.lastName}`}let F=_("amFonts"),$=_("amColors"),S=g(()=>({"--am-c-cc-primary":$.value.colorPrimary,"--am-c-cc-primary-op70":x($.value.colorPrimary,.7),"--am-c-cc-error":$.value.colorError,"--am-c-cc-error-op15":x($.value.colorError,.15),"--am-c-cc-warning":$.value.colorWarning,"--am-c-cc-warning-op15":x($.value.colorWarning,.15),"--am-c-cc-success":$.value.colorSuccess,"--am-c-cc-success-op15":x($.value.colorSuccess,.15),"--am-c-cc-bgr":$.value.colorMainBgr,"--am-c-cc-text":$.value.colorMainText,"--am-c-cc-text-op03":x($.value.colorMainText,.03),"--am-c-cc-text-op10":x($.value.colorMainText,.1),"--am-c-cc-text-op15":x($.value.colorMainText,.15),"--am-c-cc-text-op70":x($.value.colorMainText,.7),"--am-c-cc-text-op90":x($.value.colorMainText,.9),"--am-font-family":F.value.fontFamily,"--am-rad-input":"6px","--am-fs-input":"15px"}));return(I,D)=>{const k=ft;return n(),c("div",{class:"am-cc",style:ce(e(S))},[q(ma,null,{default:M(()=>[q(pa,{"heading-class":"am-cc__heading-wrapper",side:e(t).parentWidth>500},{heading:M(()=>[l("div",{class:H(["am-cc__heading",e(t).responsiveClass])},[l("div",{class:H(["am-cc__heading-info",e(t).responsiveClass])},[l("div",{class:H(["am-cc__heading-info__part",e(t).responsiveClass])},[l("div",Lo,v(e(t).start),1),e(t).parentWidth>650?(n(),c("div",wo,v(e(t).name),1)):T("",!0),e(t).parentWidth<=650?(n(),c("div",{key:1,class:H(["am-cc__status",`am-cc__status-${e(t).booking.status}`])},v(e(i)[e(t).booking.status]),3)):T("",!0)],2),l("div",{class:H(["am-cc__heading-info__part",e(t).responsiveClass])},[e(t).parentWidth<=650?(n(),c("div",So,v(e(t).name),1)):T("",!0),e(t).parentWidth>650?(n(),c("div",{key:1,class:H(["am-cc__status",`am-cc__status-${e(t).booking.status}`])},v(e(i)[e(t).booking.status]),3)):T("",!0)],2)],2),(e(t).booking.status==="approved"||e(t).booking.status==="pending"||e(t).booking.status==="waiting")&&(!e(t).isPackageBooking&&e(t).booking.price>0&&e(_t)(e(t).reservation,e(t).bookable.settings)||!!(e(t).reservation.cancelable||e(o).roles.allowCustomerReschedule&&e(t).reservation.reschedulable))?(n(),c("div",{key:0,class:H(["am-cc__heading-actions",e(t).responsiveClass])},[e(t).booking.status!=="waiting"&&!e(t).isPackageBooking&&e(t).booking.price>0&&e(_t)(e(t).reservation,e(t).bookable.settings)?(n(),W(qt,{key:0,reservation:e(t).reservation,bookable:e(t).bookable},null,8,["reservation","bookable"])):T("",!0),e(t).reservation.cancelable||e(o).roles.allowCustomerReschedule&&e(t).reservation.reschedulable?(n(),W(k,{key:1,ref:"editRef",visible:e(p),"onUpdate:visible":D[0]||(D[0]=V=>me(p)?p.value=V:p=V),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":e(S),trigger:"click"},{reference:M(()=>[e(t).booking?(n(),c("span",{key:0,class:"am-cc__edit-btn am-icon-dots-vertical",onClick:m})):T("",!0)]),default:M(()=>[at((n(),c("div",Do,[e(t).reservation.type==="appointment"&&e(o).roles.allowCustomerReschedule&&e(t).reservation.reschedulable?(n(),c("div",{key:0,class:"am-cc__edit-item",onClick:d},[Fo,l("span",Mo,v(e(i).reschedule),1)])):T("",!0),e(t).reservation.cancelable?(n(),c("div",{key:1,class:"am-cc__edit-item am-delete",onClick:u},[Oo,l("span",zo,v(e(i).cancel),1)])):T("",!0)])),[[e(dt),r]])]),_:1},8,["visible","popper-style"])):T("",!0)],2)):T("",!0)],2)]),default:M(()=>[l("div",{class:H(["am-cc__content",e(t).responsiveClass])},[l("div",Bo,[s.customizedOptions.employee.visibility?(n(),c(ae,{key:0},[(Array.isArray(e(t).employee)?e(t).employee.length:Object.keys(e(t).employee).length)?(n(),W(qe,{key:0,"header-text":Array.isArray(e(t).employee)?e(i).view_employees:e(i).provider_profile,type:"employee","content-data":e(t).employee},{default:M(()=>[l("div",Io,[Eo,l("span",Ao,v(y(e(t).employee)),1)])]),_:1},8,["header-text","content-data"])):T("",!0)],64)):T("",!0),e(t).price&&e(t).customizedOptions.price.visibility?(n(),c("div",jo,[No,l("span",Vo,v(e(tt)(e(t).price)),1)])):T("",!0),e(t).duration?(n(),c("div",Yo,[Uo,l("span",Wo,v(e(jt)(e(t).duration,e(i).h,e(i).min)),1)])):T("",!0),s.periods.length?(n(),W(qe,{key:3,"header-text":e(i).event_timetable,type:"period","content-data":e(t).periods},{default:M(()=>[l("div",qo,[Zo,l("span",Ro,v(e(i).event_timetable),1)])]),_:1},8,["header-text","content-data"])):T("",!0),e(t).googleMeetLink?(n(),c("div",Ho,[Jo,l("a",{class:"am-cc__data-text link",href:e(t).googleMeetLink,target:"_blank"},v(e(i).google_meet_link),9,Go)])):T("",!0),e(t).zoomLink?(n(),c("div",Qo,[Xo,l("a",{class:"am-cc__data-text link",href:e(t).zoomLink,target:"_blank"},v(e(i).zoom_link),9,Ko)])):T("",!0),e(t).lessonSpaceLink?(n(),c("div",en,[tn,l("a",{class:"am-cc__data-text link",href:e(t).lessonSpaceLink,target:"_blank"},v(e(i).lesson_space_link),9,an)])):T("",!0),e(t).extras.length?(n(),W(qe,{key:7,"header-text":`${e(t).extras.length} ${e(i).extras}`,type:"extras","content-data":e(t).extras},{default:M(()=>[l("div",sn,[ln,l("span",on,v(`${e(t).extras.length} ${e(i).extras}`),1)])]),_:1},8,["header-text","content-data"])):T("",!0),e(t).customFields.length?(n(),W(qe,{key:8,"header-text":e(i).custom_fields,type:"customField","content-data":e(t).customFields},{default:M(()=>[l("div",nn,[rn,l("span",cn,v(e(i).custom_fields),1)])]),_:1},8,["header-text","content-data"])):T("",!0),e(t).tickets.length?(n(),W(qe,{key:9,"header-text":e(i).event_tickets,type:"ticket","content-data":e(t).tickets},{default:M(()=>[l("div",un,[dn,l("span",pn,v(e(i).event_tickets),1)])]),_:1},8,["header-text","content-data"])):T("",!0),e(t).location?(n(),c("div",{key:10,class:H(["am-cc__data",{link:e(t).location.address}])},[mn,e(t).location.address?(n(),c("a",{key:0,class:"am-cc__data-text",href:`https://maps.google.com/?q=${e(t).location.address}`,target:"_blank"},v(e(t).location.name),9,_n)):(n(),c("span",gn,v(e(t).location.name),1))],2)):T("",!0)])],2)]),_:1},8,["side"])]),_:1})],4)}}});const fn={class:"am-csd__header"},bn={class:"am-csd__header-text"},hn=l("span",{class:"am-icon-clearable"},null,-1),yn={class:"am-csd__footer"},kn={name:"AppointmentBooking"},Rt=Object.assign(kn,{props:{visibility:{type:Boolean,default:!1},appointment:{type:Object,default:null},employees:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},slotsParams:{type:Object,default:()=>{}},labels:{type:Object,required:!0},customizedOptions:{type:Object,required:!0}},emits:["close","success","error","employee-selection","location-selection"],setup(s,{emit:a}){const t=s;let o=Ce();const i=_("settings");let p=_("amLabels"),m=h(null),r=h(null);Te(()=>t.appointment,re=>{setTimeout(()=>{Q.value++},200);let ne=JSON.parse(JSON.stringify(re));ne&&ne.bookingStart&&(m.value=ne.bookingStart.split(" ")[0],r.value=ne.bookingStart.split(" ")[1].substring(0,5))});let u=h(null),d=h(0),y=_("sidebarCollapsed");window.addEventListener("resize",F);function F(){u.value&&(d.value=u.value.offsetWidth)}Te(y,re=>{re?setTimeout(()=>{$()},1500):setTimeout(()=>{$()},500)});function $(){d.value=u.value.offsetWidth}Fe(()=>{He(()=>{d.value=u.value.offsetWidth})});let S=g(()=>t.visibility);Te(S,re=>{re&&setTimeout(()=>{d.value=u.value.offsetWidth},300)});let I=g(()=>Pe(d.value)),D=h(!1),k=h(null),V=h("");function b(){D.value=!1,V.value=""}let U=h(null),G=g(()=>U.value?U.value.calendarSlotsLoading:!0),Z=_("cabinetType"),Q=h(0),K=h(!1),B=h({employee:null,location:null}),O=h(!0),P=h(!0),w=g(()=>t.appointment&&!t.appointment.id&&(t.employees.length||t.locations.length)&&(t.customizedOptions.employee.visibility||t.customizedOptions.location.visibility)&&(O.value||P.value)),L=h(null),A=g(()=>w.value?{employee:[{required:"employee"in t.customizedOptions?t.customizedOptions.employee.required:!1,message:p.value.please_select_employee,trigger:"submit"}],location:[{required:"location"in t.customizedOptions?t.customizedOptions.location.required:!1,message:p.value.please_select_location,trigger:"submit"}]}:{}),R=g(()=>{let re={};return B.value.employee?re.providerIds=[B.value.employee]:"providerIds"in t.slotsParams&&t.slotsParams.providerIds.length&&(re.providerIds=t.slotsParams.providerIds),B.value.location?re.locationId=B.value.location:"locationId"in t.slotsParams&&t.slotsParams.locationId?re.locationId=t.slotsParams.locationId:re.locationId=null,Object.assign({},t.slotsParams,re)});function oe(){L.value&&L.value.clearValidate(),K.value=!0,Q.value++,a("employee-selection",B.value.employee),a("location-selection",B.value.location)}function se(re){B.value.employee=re,oe()}function Y(){w.value&&(B.value.employee=null,B.value.location=null,O.value=!0,P.value=!0,oe()),a("close")}Te(S,re=>{re&&t.employees.length===1&&(B.value.employee=t.employees[0].id,O.value=!1),re&&t.locations.length===1&&(B.value.location=t.locations[0].id,P.value=!1),re&&(t.locations.length===1||t.employees.length===1)&&oe()});let j=h();ue("formWrapper",j);let te=g(()=>o.getters["entities/getService"](t.appointment.serviceId).duration);ue("calendarSlotDuration",te);let ee=h(!0);ue("calendarChangeSideBar",ee);let ie=h(0);ue("calendarServiceDuration",ie);function le(){"id"in t.appointment?N():C()}function X(re){let ne=o.getters["cabinet/getTimeZone"]?o.getters["cabinet/getTimeZone"]:"UTC",ge=m.value+" "+r.value,Ve=null,ve=null;if(re){let $t=Ft(ge);ve=Dt($t),Ve=$t}else Ve=ge;return{utcOffset:ve,bookingStart:Ve,timeZone:ne}}function N(){U.value.calendarSlotsLoading=!0;let re=X(!1);Ze()===o.getters["cabinet/getTimeZone"]&&i.general.showClientTimeZone&&(re.utcOffset=Dt(Ft(m.value+" "+r.value))),xe.post("/bookings/reassign/"+t.appointment.bookings.filter(ne=>ne.status==="approved"||ne.status==="pending")[0].id,re,Object.assign(De(o),{params:{source:"cabinet-"+Z.value}})).then(()=>{U.value.calendarSlotsLoading=!1,a("success",{message:p.value.appointment_rescheduled})}).catch(ne=>{U.value.calendarSlotsLoading=!1,ne.response&&(!("data"in ne.response.data)&&"message"in ne.response.data&&(D.value=!0,V.value=ne.response.data.message,setTimeout(function(){Le(j.value,k.value.$el,0,300)},500)),"data"in ne.response&&"data"in ne.response.data&&"cancelBookingUnavailable"in ne.response.data.data&&(D.value=!0,V.value=t.labels.booking_cancel_exception,setTimeout(function(){Le(j.value,k.value.$el,0,300)},500)),"data"in ne.response&&"data"in ne.response.data&&"timeSlotUnavailable"in ne.response.data.data&&ne.response.data.data.timeSlotUnavailable===!0&&(D.value=!0,V.value=t.labels.time_slot_unavailable,setTimeout(function(){Le(j.value,k.value.$el,0,300)},500)),"data"in ne.response&&"data"in ne.response.data&&"rescheduleBookingUnavailable"in ne.response.data.data&&ne.response.data.data.rescheduleBookingUnavailable===!0&&(D.value=!0,V.value=t.labels.booking_reschedule_exception,setTimeout(function(){Le(j.value,k.value.$el,0,300)},500))),a("error")})}function f(){U.value.calendarSlotsLoading=!0;let re=X(Ze()===o.getters["cabinet/getTimeZone"]),ne=JSON.parse(JSON.stringify(t.appointment));ne.bookingStart=re.bookingStart,ne.bookings[0].utcOffset=re.utcOffset,ne.providerId=parseInt(E.value),ne.locationId=parseInt(J.value),xe.post("/bookings",ne,De(o)).then(ge=>{U.value.calendarSlotsLoading=!1,fa(o,ge),a("success",{message:p.value.booking_added_success})}).catch(ge=>{U.value.calendarSlotsLoading=!1,ge.response&&("customerAlreadyBooked"in ge.response.data.data&&ge.response.data.data.customerAlreadyBooked===!0&&(D.value=!0,V.value=t.labels.customer_already_booked_app,setTimeout(function(){Le(j.value,k.value.$el,0,300)},500)),"timeSlotUnavailable"in ge.response.data.data&&ge.response.data.data.timeSlotUnavailable===!0&&(D.value=!0,V.value=t.labels.time_slot_unavailable,setTimeout(function(){Le(j.value,k.value.$el,0,300)},500)),"packageBookingUnavailable"in ge.response.data.data&&ge.response.data.data.packageBookingUnavailable===!0&&(D.value=!0,V.value=t.labels.package_booking_unavailable,setTimeout(function(){Le(j.value,k.value.$el,0,300)},500))),a("error",ge)})}function C(){w.value?L.value.validate(re=>{re?f():setTimeout(()=>{Le(j.value,L.value.$el,0,300)},200)}):f()}let E=h(null),J=h(null),z=h(null);function _e(re,ne){if(z.value=ne,K.value=!1,!t.appointment.bookingStart)return{calendarStartDate:ga(Object.keys(ne))[0],calendarEventSlots:[],calendarEventSlot:null};let ge=t.appointment.bookingStart.split(" ");return{calendarStartDate:ge[0],calendarEventSlots:ge[0]in ne?Object.keys(ne[ge[0]]):[],calendarEventSlot:ge[1].slice(0,5)}}ue("useSlotsCallback",_e),ue("useRange",()=>{if(!t.appointment.bookingStart)return{start:null,end:null};let re=t.appointment.bookingStart.split(" ")[0];return{start:fe(re,"YYYY-MM-DD").startOf("month").subtract(6,"days").format("YYYY-MM-DD"),end:fe(re,"YYYY-MM-DD").endOf("month").add(12,"days").format("YYYY-MM-DD")}}),ue("useSelectedDuration",()=>{});function je(){let re=Object.keys(z.value[m.value]);re.length&&(E.value=r.value&&z.value[m.value][r.value]?z.value[m.value][r.value][0][0]:z.value[m.value][re[0]][0][0],J.value=r.value&&z.value[m.value][r.value]?z.value[m.value][r.value][0][1]:z.value[m.value][re[0]][0][1])}ue("useBusySlots",()=>[]),ue("useSelectedDate",(re,ne)=>(m.value=ne,t.appointment&&t.appointment.bookingStart&&(r.value=t.appointment.bookingStart.split(" ")[1].substring(0,5)),je(),Object.keys(z.value[ne]))),ue("useSelectedTime",(re,ne)=>{r.value=ne.substring(0,5),m.value?je():t.appointment&&(m.value=t.appointment.bookingStart.split(" ")[0],je())}),ue("useDeselectedDate",()=>{m.value="",r.value="",E.value=null,J.value=null});let Jt=_("amFonts"),We=_("amColors"),Gt=g(()=>({"--am-c-csd-text":We.value.colorMainText,"--am-c-csd-bgr":We.value.colorMainBgr,"--am-c-csd-text-op10":x(We.value.colorMainText,.1),"--am-c-scroll-op30":x(We.value.colorPrimary,.3),"--am-c-scroll-op10":x(We.value.colorPrimary,.1),"--am-font-family":Jt.value.fontFamily}));return(re,ne)=>{const ge=va,Ve=Re;return n(),W(st,{visibility:e(t).visibility,"custom-class":"am-csd am-csd__reschedule",style:ce(e(Gt)),position:"center"},{footer:M(()=>[l("div",yn,[q(he,{category:"secondary",size:e(d)<=360?"small":"default",type:e(t).customizedOptions.cancelBtn.buttonType,disabled:e(K)||e(G),onClick:Y},{default:M(()=>[de(v(s.labels.cancel),1)]),_:1},8,["size","type","disabled"]),q(he,{size:e(d)<=360?"small":"default",type:e(t).customizedOptions.continueBtn.buttonType,disabled:!!(e(K)||e(G)||!e(m)||!e(r)),onClick:le},{default:M(()=>[de(v(s.labels.continue),1)]),_:1},8,["size","type","disabled"])])]),default:M(()=>[l("div",{ref_key:"popupInnerRef",ref:u,class:"am-csd__inner"},[l("div",fn,[l("div",bn,v(s.labels.no_selected_slot_requirements),1),l("div",{class:"am-csd__header-btn",onClick:Y},[q(Ae,{icon:"close"})])]),l("div",{ref_key:"rescheduleRef",ref:j,class:"am-csd__content"},[e(D)?(n(),W(Ee,{key:0,ref_key:"alertContainer",ref:k,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:b,onTriggerClose:b},{title:M(()=>[hn,de(" "+v(e(V)),1)]),_:1},512)):T("",!0),e(w)?(n(),W(Ve,{key:1,ref_key:"packageFormRef",ref:L,class:"am-csd__filter-wrapper",rules:e(A),model:e(B),"label-position":"top"},{default:M(()=>[l("div",{class:H(["am-csd__filter am-csd__filter-employee",e(I)])},[e(t).employees.length&&e(O)&&e(t).customizedOptions.employee.visibility?(n(),W(ge,{key:0,class:H([{"am-csd__filter-full":!(e(t).locations.length&&e(P)&&e(t).customizedOptions.location.visibility)},e(I)]),label:`${e(p).package_appointment_employee}:`,prop:"employee"},{default:M(()=>[q(Xe,{modelValue:e(B).employee,"onUpdate:modelValue":ne[0]||(ne[0]=ve=>e(B).employee=ve),clearable:"",filterable:e(t).customizedOptions.employee.filterable,placeholder:`${e(p).package_select_employee}...`,"fit-input-width":!0,"popper-class":"am-csd__filter-employees",disabled:e(K),onChange:oe},{default:M(()=>[(n(!0),c(ae,null,pe(e(t).employees,ve=>(n(),W(Qe,{key:ve.id,value:ve.id,label:`${ve.firstName} ${ve.lastName}`},{default:M(()=>[q(cs,{identifier:ve.id,label:`${ve.firstName} ${ve.lastName}`,price:0,"image-thumb":ve.pictureThumbPath,description:ve.description,"dialog-title":e(p).employee_information_package,"dialog-button-text":e(p).select_this_employee_package,badge:ve.badge,onClick:se},null,8,["identifier","label","image-thumb","description","dialog-title","dialog-button-text","badge"])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","filterable","placeholder","disabled"])]),_:1},8,["class","label"])):T("",!0),e(t).locations.length&&e(P)&&e(t).customizedOptions.location.visibility?(n(),W(ge,{key:1,class:H([{"am-csd__filter-full":!(e(t).employees.length&&e(O)&&e(t).customizedOptions.employee.visibility)},e(I)]),label:`${e(p).package_appointment_location}:`,prop:"location"},{default:M(()=>[q(Xe,{modelValue:e(B).location,"onUpdate:modelValue":ne[1]||(ne[1]=ve=>e(B).location=ve),clearable:"",filterable:e(t).customizedOptions.location.filterable,placeholder:`${e(p).package_select_location}...`,"fit-input-width":!0,disabled:e(K),onChange:oe},{default:M(()=>[(n(!0),c(ae,null,pe(e(t).locations,ve=>(n(),W(Qe,{key:ve.id,value:ve.id,label:ve.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","filterable","placeholder","disabled"])]),_:1},8,["class","label"])):T("",!0)],2)]),_:1},8,["rules","model"])):T("",!0),e(t).appointment!==null?(n(),W(_a,{key:2,id:0,ref_key:"calendarRef",ref:U,"preselect-slot":!1,"load-counter":e(Q),"end-time":e(t).customizedOptions.endTimeVisibility.visibility,"time-zone":e(t).customizedOptions.timeZoneVisibility.visibility,"label-slots-selected":s.labels.date_time_slots_selected,"fetched-slots":null,"service-id":0,date:e(t).appointment&&e(t).appointment.bookingStart?e(t).appointment.bookingStart.split(" ")[0]:"","slots-params":e(R)},null,8,["load-counter","end-time","time-zone","label-slots-selected","date","slots-params"])):T("",!0)],512)],512)]),_:1},8,["visibility","style"])}}});const xn={class:"am-csd__inner"},Cn={class:"am-csd__header"},Tn={class:"am-csd__header-text"},$n={class:"am-csd__content"},Pn={class:"am-ccpss__heading"},Ln={class:"am-csd__footer"},wn={name:"CancelBooking"},xt=Object.assign(wn,{props:{visibility:{type:Boolean,required:!0},title:{type:String,default:""},description:{type:String,default:""},closeBtnText:{type:String,required:!0},confirmBtnText:{type:String,required:!0},loading:{type:Boolean,default:!1},count:{type:Number,default:1},customizedOptions:{type:Object,required:!0}},emits:["close","confirm"],setup(s,{emit:a}){const t=s;let o=_("containerWidth"),i=_("amFonts"),p=_("amColors"),m=g(()=>({"--am-c-csd-text":p.value.colorMainText,"--am-c-csd-bgr":p.value.colorMainBgr,"--am-font-family":i.value.fontFamily}));return(r,u)=>{const d=ot,y=nt;return n(),W(st,{visibility:e(t).visibility,"custom-class":"am-csd am-csd__cancel",style:ce(e(m)),position:"center"},{footer:M(()=>[l("div",Ln,[q(he,{category:"secondary",size:e(o)<=360?"small":"default",type:s.customizedOptions.cancelBtn.buttonType,disabled:s.loading,onClick:u[1]||(u[1]=()=>{a("close")})},{default:M(()=>[de(v(e(t).closeBtnText),1)]),_:1},8,["size","type","disabled"]),q(he,{category:"danger",size:e(o)<=360?"small":"default",type:s.customizedOptions.confirmBtn.buttonType,disabled:s.loading,onClick:u[2]||(u[2]=()=>{a("confirm")})},{default:M(()=>[de(v(e(t).confirmBtnText),1)]),_:1},8,["size","type","disabled"])])]),default:M(()=>[l("div",xn,[s.loading?(n(),W(y,{key:1,animated:"",class:"am-ccpss"},{template:M(()=>[l("div",Pn,[q(d,{variant:"rect"})]),(n(!0),c(ae,null,pe(new Array(e(t).count),F=>(n(),c("div",{key:F,class:"am-ccpss__text"},[q(d,{variant:"rect"})]))),128))]),_:1})):(n(),c(ae,{key:0},[l("div",Cn,[l("div",Tn,v(e(t).title),1),l("div",{class:"am-csd__header-btn",onClick:u[0]||(u[0]=()=>{a("close")})},[q(Ae,{icon:"close"})])]),l("div",$n,[l("p",null,v(e(t).description),1)])],64))])]),_:1},8,["visibility","style"])}}});const Sn={name:"CabinetAppointmentsList"},Ht=Object.assign(Sn,{props:{groupedAppointments:{type:Object,default:null},responsiveClass:{type:String,default:""},pageWidth:{type:Number},isPackageBooking:{type:Boolean,default:!1},stepKey:{type:String,required:!0}},emits:["booked","canceled"],setup(s,{emit:a}){const t=s;let o=Ce();const i=_("settings");let p=_("amLabels"),m=_("cabinetType"),r=h(null),u=h(null),d=h(null);function y(B=null){u.value=null,a("booked",B)}let F=h(!1);function $(){F.value=!0,xe.post("/bookings/cancel/"+r.value.id,{type:"appointment"},Object.assign(De(o),{params:{source:"cabinet-"+m.value}})).then(()=>{r.value=null,a("canceled",{message:p.value.appointment_canceled})}).catch(B=>{console.log(B)}).finally(()=>{F.value=!1})}function S(B){let O=Nt(o,{price:B.bookings[0].price,persons:B.bookings[0].persons,aggregatedPrice:B.bookings[0].aggregatedPrice,extras:B.bookings[0].extras,tax:B.bookings[0].tax,coupon:B.bookings[0].coupon},!1);return O.total-O.discount+O.tax}function I(B){let O=[],P=0,w=B;w.bookings.forEach(A=>{A.extras.forEach(R=>{O.push({id:R.extraId,quantity:R.quantity})}),"duration"in A&&A.duration&&A.duration>P&&(A.status==="approved"||A.status==="pending")&&(P=A.duration)});let L={serviceId:w.serviceId,serviceDuration:P||null,locationId:w.locationId,providerIds:[w.providerId],extras:JSON.stringify(O),excludeAppointmentId:w.isGroup?null:w.id,group:1,timeZone:o.getters["cabinet/getTimeZone"],page:"cabinet"};u.value=B,d.value=L}function D(B){return o.getters["entities/getEmployee"](B)}let k=_("amCustomize");const V=_("labels"),b=_("localLanguage");let U=g(()=>i.general.usedLanguages.includes(b.value));function G(B){let O=ke(be({},V)),P=k.value[B].translations;return P&&Object.keys(P).forEach(w=>{P[w][b.value]&&U.value?O[w]=P[w][b.value]:P[w].default&&(O[w]=P[w].default)}),O}function Z(B){return k.value[B].options}let Q=_("amColors"),K=g(()=>({"--am-c-capa-bgr":Q.value.colorMainBgr,"--am-c-capa-text":Q.value.colorMainText,"--am-c-capa-text-op70":x(Q.value.colorMainText,.7),"--am-c-capa-text-op25":x(Q.value.colorMainText,.25),"--am-c-capa-primary":Q.value.colorPrimary}));return(B,O)=>(n(),c(ae,null,[l("div",{class:H(["am-capa__wrapper",[{"am-no-border":e(t).groupedAppointments&&Object.keys(e(t).groupedAppointments).length===1},e(t).responsiveClass]]),style:ce(e(K))},[(n(!0),c(ae,null,pe(e(t).groupedAppointments,(P,w)=>(n(),c("div",{key:w,class:"am-capa"},[l("div",{class:H(["am-capa__date",[{"am-today":e(Me)(w)===e(Me)(e(Pa)().format("YYYY-MM-DD"))},{"am-no-flag":e(t).groupedAppointments&&Object.keys(e(t).groupedAppointments).length===1},e(t).responsiveClass]])},v(e(Me)(w)),3),(n(!0),c(ae,null,pe(P.appointments,(L,A)=>(n(),c(ae,{key:A},[e(o).getters["entities/getService"](L.serviceId)?(n(),W(Zt,{key:0,start:e(et)(L.bookingStart.split(" ")[1].slice(0,5)),name:e(o).getters["entities/getService"](L.serviceId).name,employee:D(L.provider.id),price:S(L),duration:e(Fl)(e(o),L),periods:[],extras:e(Ml)(L.bookings,e(o).getters["entities/getService"](L.serviceId)),tickets:[],"custom-fields":e(Wt)(L.bookings),location:L.locationId?e(o).getters["entities/getLocation"](L.locationId):null,"google-meet-link":L.googleMeetUrl,"zoom-link":L.zoomMeeting?L.zoomMeeting.joinUrl:"","lesson-space-link":L.lessonSpace,bookable:L.service,reservation:L,booking:L.bookings[0],"is-package-booking":e(t).isPackageBooking,"responsive-class":e(t).responsiveClass,"parent-width":e(t).pageWidth,"customized-options":Z(e(t).stepKey),onCancelBooking:O[0]||(O[0]=R=>{me(r)?r.value=R:r=R}),onRescheduling:I},null,8,["start","name","employee","price","duration","extras","custom-fields","location","google-meet-link","zoom-link","lesson-space-link","bookable","reservation","booking","is-package-booking","responsive-class","parent-width","customized-options"])):T("",!0)],64))),128))]))),128))],6),q(xt,{visibility:e(r)!==null,title:G("cancelAppointment").cancel_appointment,description:G("cancelAppointment").confirm_cancel_appointment,"close-btn-text":G("cancelAppointment").close,"confirm-btn-text":G("cancelAppointment").confirm,"customized-options":Z("cancelAppointment"),loading:e(F),onClose:O[1]||(O[1]=P=>me(r)?r.value=null:r=null),onConfirm:$},null,8,["visibility","title","description","close-btn-text","confirm-btn-text","customized-options","loading"]),q(Rt,{visibility:e(u)!==null,appointment:e(u),"slots-params":e(d),labels:G("rescheduleAppointment"),"customized-options":Z("rescheduleAppointment"),onClose:O[2]||(O[2]=P=>me(u)?u.value=null:u=null),onSuccess:y,onError:O[3]||(O[3]=()=>{})},null,8,["visibility","appointment","slots-params","labels","customized-options"])],64))}});const Dn={key:0,class:"el-skeleton-item-wrapper-title"},Fn={name:"AuthSkeleton"},Ct=Object.assign(Fn,{props:{centerFirst:{type:Boolean,default:!1},count:{type:Number,default:3},mainClass:{type:String,default:""}},setup(s){const a=s;return(t,o)=>{const i=ot,p=nt;return n(),W(p,{animated:"",class:H(["am-asi-el-skeleton",[{"am-asi":e(a).mainClass}]])},{template:M(()=>[e(a).centerFirst?(n(),c("div",Dn,[q(i,{variant:"rect"})])):T("",!0),(n(!0),c(ae,null,pe(new Array(e(a).count),m=>(n(),c("div",{key:m,class:"el-skeleton-item-wrapper"},[q(i,{variant:"rect"})]))),128))]),_:1},8,["class"])}}});const Mn={class:"am-ces__img-holder"},On={width:"240",height:"195",viewBox:"0 0 240 195",fill:"none",xmlns:"http://www.w3.org/2000/svg"},zn={"clip-path":"url(#clip0_1811_81872)"},Bn=["fill"],In=["fill"],En=["fill"],An=["fill"],jn=["fill"],Nn=["fill"],Vn=["fill"],Yn={opacity:"0.5"},Un=["fill"],Wn=["fill"],qn=["fill"],Zn=["fill"],Rn=["fill"],Hn=["stroke"],Jn={opacity:"0.5"},Gn=["stroke"],Qn=ba('<circle cx="109.964" cy="55.167" r="34.0723" transform="rotate(-45 109.964 55.167)" fill="url(#paint0_linear_1811_81872)" fill-opacity="0.7"></circle><mask id="mask0_1811_81872" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="75" y="21" width="69" height="69"><circle cx="109.714" cy="55.167" r="34.0723" transform="rotate(-45 109.714 55.167)" fill="url(#paint1_linear_1811_81872)"></circle></mask><g mask="url(#mask0_1811_81872)"><rect x="111.095" y="4.51782" width="10.0968" height="107.245" transform="rotate(30 111.095 4.51782)" fill="url(#paint2_linear_1811_81872)" fill-opacity="0.6"></rect><rect x="125.427" y="2.67041" width="3.39099" height="107.245" transform="rotate(30 125.427 2.67041)" fill="url(#paint3_linear_1811_81872)" fill-opacity="0.6"></rect></g>',3),Xn={id:"paint0_linear_1811_81872",x1:"144.037",y1:"91.6409",x2:"83.5731",y2:"31.1781",gradientUnits:"userSpaceOnUse"},Kn=["stop-color"],ei=["stop-color"],ti={id:"paint1_linear_1811_81872",x1:"143.786",y1:"91.6409",x2:"83.3226",y2:"31.1781",gradientUnits:"userSpaceOnUse"},ai=["stop-color"],si=["stop-color"],li={id:"paint2_linear_1811_81872",x1:"116.144",y1:"4.51782",x2:"116.144",y2:"111.763",gradientUnits:"userSpaceOnUse"},oi=["stop-color"],ni=["stop-color"],ii={id:"paint3_linear_1811_81872",x1:"127.122",y1:"2.67041",x2:"127.122",y2:"109.915",gradientUnits:"userSpaceOnUse"},ri=["stop-color"],ci=["stop-color"],ui={id:"clip0_1811_81872"},di=["fill"],pi={class:"am-ces__content"},mi={class:"am-ces__heading"},_i={class:"am-ces__text"},Tt={props:{heading:{type:String,default:""},text:{type:String,default:""}},setup(s){const a=s;let t=_("amColors"),o=g(()=>({"--am-c-ces-text":t.value.colorMainText,"--am-c-ces-text-op70":x(t.value.colorMainText,.7)}));return(i,p)=>(n(),c("div",{class:"am-ces",style:ce(e(o))},[l("div",Mn,[(n(),c("svg",On,[l("g",zn,[l("path",{d:"M10.0934 144.996C11.624 145.051 13.0595 145.879 14.0693 147.034C15.0791 148.184 15.6995 149.633 16.0934 151.114C16.8587 153.976 16.3878 157.359 15.5727 160.207C12.4708 159.097 10.5599 155.792 9.69496 154.053C8.32741 151.304 7.5259 145.513 10.0889 144.996",fill:e(t).colorMainText},null,8,Bn),l("path",{d:"M20.033 163.676C19.0549 162.272 19.0322 160.32 19.8066 158.79C20.5809 157.264 22.0662 156.163 23.7009 155.661C24.4571 155.43 25.3356 155.33 25.9922 155.769C26.6081 156.181 26.8752 156.987 26.7937 157.721C26.7122 158.455 26.3409 159.129 25.9017 159.723C24.3937 161.765 22.5598 163.463 20.033 163.671",fill:e(t).colorMainText},null,8,In),l("path",{d:"M20.3771 173.244C20.3771 173.244 20.3137 173.036 20.2367 172.651C20.1552 172.225 20.0465 171.677 19.9198 171.021C19.6752 169.649 19.2858 167.697 19.5801 165.541C19.8609 163.395 20.7167 161.557 21.6133 160.461C22.0526 159.908 22.4782 159.514 22.7907 159.274C22.9401 159.148 23.076 159.071 23.1575 159.007C23.2435 158.948 23.2933 158.921 23.2979 158.93C23.3296 158.966 22.5733 159.437 21.7356 160.556C20.8888 161.656 20.0737 163.458 19.793 165.573C19.5032 167.688 19.8609 169.621 20.0692 170.998C20.1779 171.691 20.2684 172.252 20.3228 172.642C20.3726 173.031 20.3952 173.249 20.3771 173.249V173.244Z",fill:e(t).colorMainText},null,8,En),l("path",{d:"M11.0894 149.357C11.0894 149.357 11.1392 149.434 11.2161 149.593C11.2977 149.769 11.4063 150 11.5377 150.281C11.8094 150.883 12.1988 151.757 12.6652 152.839C13.598 155.009 14.8478 158.024 16.152 161.38C17.4561 164.74 18.5656 167.81 19.3354 170.038C19.7203 171.152 20.0282 172.058 20.232 172.687C20.3271 172.986 20.4041 173.226 20.4629 173.412C20.5128 173.579 20.5354 173.665 20.5309 173.67C20.5263 173.674 20.4856 173.588 20.4222 173.425C20.3543 173.239 20.2637 173.004 20.155 172.714C19.9195 172.071 19.5935 171.179 19.195 170.088C18.3845 167.869 17.2524 164.812 15.9528 161.452C14.6486 158.097 13.426 155.076 12.5294 152.894C12.0901 151.821 11.7278 150.942 11.4652 150.308C11.3475 150.018 11.2569 149.783 11.1844 149.602C11.1211 149.439 11.0939 149.353 11.0984 149.348L11.0894 149.357Z",fill:e(t).colorMainText},null,8,An),l("path",{d:"M16.6956 166.913C14.8662 163.802 11.4564 161.683 7.85639 161.421C6.94167 161.353 5.83676 161.507 5.42922 162.331C5.02167 163.155 5.56507 164.128 6.18997 164.808C8.78922 167.62 13.1817 168.602 16.7273 167.162",fill:e(t).colorMainText},null,8,jn),l("path",{d:"M9.25113 163.875C9.25113 163.875 9.4549 163.87 9.82622 163.897C10.0119 163.911 10.2383 163.925 10.4964 163.974C10.7545 164.024 11.0534 164.051 11.3749 164.137C11.6964 164.214 12.0541 164.296 12.4209 164.427C12.7968 164.536 13.1817 164.699 13.5847 164.871C14.3817 165.233 15.233 165.709 16.0391 166.325C16.8406 166.95 17.5153 167.647 18.0677 168.331C18.3304 168.679 18.584 169.014 18.7832 169.354C19.0006 169.68 19.1636 170.006 19.313 170.3C19.476 170.59 19.5711 170.876 19.6798 171.116C19.7885 171.356 19.8519 171.573 19.9062 171.75C20.0149 172.103 20.0692 172.297 20.0557 172.302C20.0104 172.32 19.7885 171.528 19.1772 170.368C19.0187 170.083 18.8511 169.766 18.6292 169.449C18.43 169.119 18.1764 168.797 17.9092 168.457C17.3613 167.792 16.6911 167.113 15.9032 166.497C15.1108 165.89 14.2821 165.419 13.4987 165.052C13.1047 164.88 12.7243 164.713 12.3575 164.599C11.9998 164.463 11.6511 164.377 11.3341 164.287C10.0617 163.965 9.24207 163.92 9.2466 163.875H9.25113Z",fill:e(t).colorMainText},null,8,Nn),l("path",{d:"M91.9065 80.3956L75.8945 162.72L73.7979 173.497L180.693 172.972C185.488 172.95 189.74 168.688 191.285 162.362L210.24 84.6386C211.413 79.8341 208.841 74.8394 205.2 74.8394L97.0099 74.9526C94.619 74.9526 92.5314 77.185 91.9065 80.3956Z",fill:e(t).colorMainBgr},null,8,Vn),l("g",Yn,[l("path",{d:"M91.9065 80.3951L75.8945 162.72L73.7979 173.497L180.693 172.972C185.488 172.949 189.74 168.688 191.285 162.362L210.24 84.6381C211.413 79.8336 208.841 74.8389 205.2 74.8389L97.0099 74.9521C94.619 74.9521 92.5314 77.1845 91.9065 80.3951Z",fill:e(t).colorMainText},null,8,Un)]),l("path",{d:"M170.441 157.146L159.125 65.9412C158.663 62.2053 155.683 59.4159 152.169 59.4295L127.35 59.511C125.511 59.5155 123.75 60.2989 122.445 61.6846L110.663 74.2099L41.6378 74.5721C37.422 74.5948 34.1797 78.5842 34.7367 83.0718L45.2469 167.366C45.7133 171.097 48.6839 173.882 52.1933 173.873L172.488 173.638C185.887 173.914 187.164 169.961 187.164 169.961C171.808 173.362 170.441 157.159 170.441 157.15V157.146Z",fill:e(t).colorMainText},null,8,Wn),l("rect",{x:"130.984",y:"80.0801",width:"5.5062",height:"25.0888",rx:"2.7531",transform:"rotate(-45 130.984 80.0801)",fill:e(t).colorMainBgr},null,8,qn),l("path",{d:"M147.845 104.347C142.496 98.9978 142.496 90.3249 147.845 84.9756C148.737 84.084 150.182 84.084 151.074 84.9756L178.063 111.965C181.183 115.085 181.183 120.144 178.063 123.265C174.942 126.385 169.883 126.385 166.763 123.265L147.845 104.347Z",fill:e(t).colorMainBgr},null,8,Zn),l("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M151.42 91.7928C151.138 91.5115 150.682 91.5115 150.401 91.7928C150.12 92.0741 150.12 92.5303 150.401 92.8116L161.801 104.212C162.083 104.493 162.539 104.493 162.82 104.212C163.101 103.931 163.101 103.474 162.82 103.193L151.42 91.7928ZM165.702 105.806C165.42 105.524 164.964 105.524 164.683 105.806C164.402 106.087 164.402 106.543 164.683 106.825L165.11 107.252C165.391 107.533 165.847 107.533 166.129 107.252C166.41 106.97 166.41 106.514 166.129 106.233L165.702 105.806Z",fill:e(t).colorMainText},null,8,Rn),l("circle",{cx:"109.964",cy:"55.167",r:"37.6805",transform:"rotate(-45 109.964 55.167)",stroke:e(t).colorMainText,"stroke-width":"8"},null,8,Hn),l("g",Jn,[l("circle",{cx:"109.964",cy:"55.167",r:"37.6805",transform:"rotate(-45 109.964 55.167)",stroke:e(t).colorMainBgr,"stroke-width":"8"},null,8,Gn)]),Qn]),l("defs",null,[l("linearGradient",Xn,[l("stop",{"stop-color":e(t).colorMainBgr},null,8,Kn),l("stop",{offset:"1","stop-color":e(t).colorMainBgr},null,8,ei)]),l("linearGradient",ti,[l("stop",{"stop-color":e(t).colorMainBgr},null,8,ai),l("stop",{offset:"1","stop-color":e(t).colorMainBgr},null,8,si)]),l("linearGradient",li,[l("stop",{"stop-color":e(t).colorMainText},null,8,oi),l("stop",{offset:"1","stop-color":e(t).colorMainText,"stop-opacity":"0"},null,8,ni)]),l("linearGradient",ii,[l("stop",{"stop-color":e(t).colorMainText},null,8,ri),l("stop",{offset:"1","stop-color":e(t).colorMainText,"stop-opacity":"0"},null,8,ci)]),l("clipPath",ui,[l("rect",{width:"240",height:"194.717",fill:e(t).colorMainText},null,8,di)])])]))]),l("div",pi,[l("div",mi,v(e(a).heading),1),l("div",_i,v(e(a).text),1)])],4))}};const gi=l("span",{class:"am-icon-checkmark-circle-full"},null,-1),vi={name:"CabinetAppointments",key:"appointments"},fi=Object.assign(vi,{props:{loadBookingsCounter:{type:Number,default:0},appointments:{type:Object,default:null}},setup(s){const a=s;let t=Ce();const o=_("settings");let i=_("amCustomize");const p=_("labels"),m=_("localLanguage");let r=g(()=>o.general.usedLanguages.includes(m.value)),u=g(()=>{let O=ke(be({},p)),P=i.value.appointments.translations;return P&&Object.keys(P).forEach(w=>{P[w][m.value]&&r.value?O[w]=P[w][m.value]:P[w].default&&(O[w]=P[w].default)}),O});ue("amLabels",u);let d=h(null),y=h(0),F=_("sidebarCollapsed");window.addEventListener("resize",$);function $(){d.value&&(y.value=d.value.offsetWidth)}Te(F,O=>{O?setTimeout(()=>{S()},1500):setTimeout(()=>{S()},500)});function S(){y.value=d.value.offsetWidth}Fe(()=>{He(()=>{y.value=d.value.offsetWidth})});let I=g(()=>Pe(y.value)),D=h(!1),k=h(null),V=h(!1),b=h("success"),U=h("");function G(){V.value=!1,t.commit("cabinet/setPaymentLinkError",{value:!1,type:"appointment"})}let Z=_("cabinetType");t.commit("cabinetFilters/setDates",bt(Z.value));let Q=g(()=>t.getters["cabinet/getAppointmentsLoading"]),K=h(null);function B(O=null){t.commit("cabinet/setAppointmentsLoading",!0);let P=JSON.parse(JSON.stringify(t.getters["cabinetFilters/getAppointmentsFilters"])),w=t.getters["cabinet/getTimeZone"];P.dates=P.dates.map(L=>fe(L).format("YYYY-MM-DD")),P.timeZone=w,P.source="cabinet-"+Z.value,xe.get("/appointments",ht(Object.assign(De(t),{params:P}))).then(L=>{K.value=Ut(L.data.data.appointments,w);let A=!(P.services.length||P.providers.length||P.locations.length);if(D.value=(!K.value||Object.values(K.value).length===0)&&A,K.value&&Object.values(K.value).length>0&&A){let R=Object.values(K.value).map(Y=>Y.appointments.map(j=>j.serviceId)).flat().filter((Y,j,te)=>te.indexOf(Y)===j);t.dispatch("cabinetFilters/injectServiceOptions",R);let oe=Object.values(K.value).map(Y=>Y.appointments.map(j=>j.providerId)).flat().filter((Y,j,te)=>te.indexOf(Y)===j);t.dispatch("cabinetFilters/injectProviderOptions",oe);let se=Object.values(K.value).map(Y=>Y.appointments.map(j=>j.locationId)).flat().filter((Y,j,te)=>te.indexOf(Y)===j);t.dispatch("cabinetFilters/injectLocationOptions",se)}}).catch(L=>{console.log(L)}).finally(()=>{t.commit("cabinet/setAppointmentsLoading",!1),O&&"message"in O&&(V.value=!0,U.value=O.message,d.value&&k.value&&setTimeout(function(){Le(d.value,k.value.$el,0,300)},500))})}return Te(()=>a.loadBookingsCounter,()=>{B()}),Fe(()=>{B()}),(O,P)=>(n(),c("div",{ref_key:"pageContainer",ref:d,class:"am-cap"},[e(V)?(n(),W(Ee,{key:0,ref_key:"alertContainer",ref:k,type:e(b),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:G,onTriggerClose:G},{title:M(()=>[gi,de(" "+v(e(U)),1)]),_:1},8,["type"])):T("",!0),q(kt,{"step-key":"appointments","responsive-class":e(I),empty:e(D),onChangeFilters:B},null,8,["responsive-class","empty"]),e(Q)?(n(),W(Ct,{key:2})):(n(),c(ae,{key:1},[e(K)&&Object.keys(e(K)).length>0?(n(),W(Ht,{key:0,"grouped-appointments":e(K),"page-width":e(y),"responsive-class":e(I),"step-key":"appointments",onCanceled:B,onBooked:B},null,8,["grouped-appointments","page-width","responsive-class"])):(n(),W(Tt,{key:1,heading:e(u).no_app_found,text:e(u).have_no_app},null,8,["heading","text"]))],64))],512))}});const bi=l("span",{class:"am-icon-checkmark-circle-full"},null,-1),hi={name:"CabinetEvents",key:"events"},yi=Object.assign(hi,{props:{loadBookingsCounter:{type:Number,default:0}},setup(s){const a=s;let t=Ce(),o=h(null),i=h(0),p=_("sidebarCollapsed");window.addEventListener("resize",m);function m(){o.value&&(i.value=o.value.offsetWidth)}Te(p,Y=>{Y?setTimeout(()=>{r()},1500):setTimeout(()=>{r()},500)});function r(){i.value=o.value.offsetWidth}Fe(()=>{He(()=>{i.value=o.value.offsetWidth})});let u=g(()=>Pe(i.value));const d=_("settings");let y=_("amCustomize");const F=_("labels"),$=_("localLanguage");let S=g(()=>d.general.usedLanguages.includes($.value)),I=g(()=>{let Y=ke(be({},F)),j=y.value.events.translations;return j&&Object.keys(j).forEach(te=>{j[te][$.value]&&S.value?Y[te]=j[te][$.value]:j[te].default&&(Y[te]=j[te].default)}),Y});ue("amLabels",I);let D=h(null),k=h(!1),V=h("success"),b=h("");function U(){k.value=!1,t.commit("cabinet/setPaymentLinkError",{value:!1,type:"event"})}function G(Y){let j=ke(be({},F)),te=y.value[Y].translations;return te&&Object.keys(te).forEach(ee=>{te[ee][$.value]&&S.value?j[ee]=te[ee][$.value]:te[ee].default&&(j[ee]=te[ee].default)}),j}function Z(Y){return y.value[Y].options}let Q=_("cabinetType");t.commit("cabinetFilters/setDates",bt(Q.value));let K=g(()=>t.getters["cabinet/getEventsLoading"]),B=h(!1),O=h(null),P=h(null);function w(){O.value=null,t.commit("cabinet/setEventsLoading",!0);let Y=t.getters["cabinet/getTimeZone"],j=JSON.parse(JSON.stringify(t.getters["cabinetFilters/getEventsFilters"]));j.dates=j.dates.map(te=>fe(te).format("YYYY-MM-DD")),j.timeZone=Y,j.source="cabinet-"+Q.value,j.id=j.events,xe.get("/events",ht(Object.assign(De(t),{params:j}))).then(te=>{t.commit("eventEntities/setEvents",te.data.data.events),P.value=us(te.data.data.events,t.getters["cabinet/getTimeZone"],t);let ee=!(j.events.length||j.providers.length||j.locations.length);if(B.value=(!P.value||Object.values(P.value).length===0)&&ee,P.value&&Object.values(P.value).length>0&&ee){t.dispatch("cabinetFilters/injectEventsOptions");let ie=Object.values(P.value).map(X=>X.events.map(N=>N.organizerId)).flat().concat(Object.values(P.value).map(X=>X.events.map(N=>N.providers).flat().map(N=>N.id)).flat()).filter((X,N,f)=>f.indexOf(X)===N);t.dispatch("cabinetFilters/injectProviderOptions",ie);let le=Object.values(P.value).map(X=>X.events.map(N=>N.locationId)).flat().filter((X,N,f)=>f.indexOf(X)===N);t.dispatch("cabinetFilters/injectLocationOptions",le)}}).catch(te=>{console.log(te)}).finally(()=>{t.commit("cabinet/setEventsLoading",!1)})}let L=h(!1);function A(){L.value=!0,xe.post("/bookings/cancel/"+O.value.id,{type:"event",source:"cabinet-"+Q.value},Object.assign(De(t),{params:{source:"cabinet-"+Q.value}})).then(()=>{O.value=null,w(),k.value=!0,b.value=I.value.event_canceled,o.value&&D.value&&setTimeout(function(){Le(o.value,D.value.$el,0,300)},500)}).catch(Y=>{!("data"in Y.response.data)&&"message"in Y.response.data&&(k.value=!0,b.value=Y.response.data.message,o.value&&D.value&&setTimeout(function(){Le(o.value,D.value.$el,0,300)},500))}).finally(()=>{L.value=!1})}Te(()=>a.loadBookingsCounter,()=>{w()}),Fe(()=>{w()});function R(Y){let j=[],te=t.getters["entities/getEmployees"];if(Y.organizerId&&te.find(ee=>ee.id===Y.organizerId)){let ee=wt(be({},te.find(ie=>ie.id===Y.organizerId)),{rank:"organizer"});if(!Y.providers.length)return ee;j.push(ee)}return Y.providers.length&&Y.providers.forEach(ee=>{ee.id!==Y.organizerId&&te.find(ie=>ie.id===ee.id)&&j.push(te.find(ie=>ie.id===ee.id))}),j}let oe=_("amColors"),se=g(()=>({"--am-c-cape-bgr":oe.value.colorMainBgr,"--am-c-cape-text":oe.value.colorMainText,"--am-c-cape-text-op70":x(oe.value.colorMainText,.7),"--am-c-cape-text-op25":x(oe.value.colorMainText,.25),"--am-c-cape-primary":oe.value.colorPrimary}));return(Y,j)=>(n(),c("div",{ref_key:"pageContainer",ref:o,class:"am-cap",style:ce(e(se))},[e(k)?(n(),W(Ee,{key:0,ref_key:"alertContainer",ref:D,type:e(V),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:U,onTriggerClose:U},{title:M(()=>[bi,de(" "+v(e(b)),1)]),_:1},8,["type"])):T("",!0),q(kt,{"step-key":"events",empty:e(B),"responsive-class":e(u),onChangeFilters:w},null,8,["empty","responsive-class"]),e(K)?(n(),W(Ct,{key:2})):(n(),c(ae,{key:1},[e(P)&&Object.keys(e(P)).length>0?(n(),c("div",{key:0,class:H(["am-cape__wrapper",[{"am-no-border":e(P)&&Object.keys(e(P)).length===1},e(u)]])},[(n(!0),c(ae,null,pe(e(P),(te,ee)=>(n(),c("div",{key:ee,class:"am-cape"},[l("div",{class:H(["am-cape__date",[{"am-today":e(Me)(ee)===e(Me)(e(fe)().format("YYYY-MM-DD"))},{"am-no-flag":e(P)&&Object.keys(e(P)).length===1},e(u)]])},v(e(Me)(ee)),3),(n(!0),c(ae,null,pe(te.events,(ie,le)=>(n(),W(Zt,{key:le,start:e(et)(ie.periods[0].periodStart.split(" ")[1].slice(0,5)),name:ie.name,employee:R(ie),price:e(Vt)(ie),duration:null,periods:(Y.periods=e(ds)(ie.periods))?Y.periods:[],extras:[],tickets:e(ps)(ie),"custom-fields":e(Wt)(ie.bookings),location:e(ms)(e(t),ie),"google-meet-link":ie.periods.length===1&&ie.periods[0].googleMeetUrl?ie.periods[0].googleMeetUrl:"","zoom-link":ie.periods.length===1&&ie.periods[0].zoomMeeting?ie.periods[0].zoomMeeting.joinUrl:"","lesson-space-link":ie.periods.length===1&&ie.periods[0].lessonSpace?ie.periods[0].lessonSpace:"",bookable:ie,reservation:ie,booking:ie.bookings[0],"responsive-class":e(u),"parent-width":e(i),"customized-options":Z("events"),onCancelBooking:j[0]||(j[0]=X=>{me(O)?O.value=X:O=X})},null,8,["start","name","employee","price","periods","tickets","custom-fields","location","google-meet-link","zoom-link","lesson-space-link","bookable","reservation","booking","responsive-class","parent-width","customized-options"]))),128))]))),128))],2)):T("",!0),e(P)===null||Object.keys(e(P)).length===0?(n(),W(Tt,{key:1,heading:e(I).no_evt_found,text:e(I).have_no_evt},null,8,["heading","text"])):T("",!0),q(xt,{visibility:e(O)!==null,title:G("cancelEvent").cancel_event,description:G("cancelEvent").confirm_cancel_event,"close-btn-text":G("cancelEvent").close,"confirm-btn-text":G("cancelEvent").confirm,"customized-options":Z("cancelEvent"),loading:e(L),onClose:j[1]||(j[1]=te=>me(O)?O.value=null:O=null),onConfirm:A},null,8,["visibility","title","description","close-btn-text","confirm-btn-text","customized-options","loading"])],64))],4))}});const ki={class:"am-sc__top-left"},xi={class:"am-sc__name"},Ci={key:0,class:"am-sc__date"},Ti={key:1,class:"am-sc__date"},$i=["onClick"],Pi={class:"am-sc__capacity"},Li=l("div",{class:"am-sc__btn"},[l("span",{class:"am-icon-arrow-right"})],-1),wi={key:0,class:"am-sc__bottom"},Si={class:"am-sc__expiration"},Di=l("span",{class:"am-icon-triangle-info"},null,-1),Fi={name:"CabinetPackagesList"},Mi=Object.assign(Fi,{props:{packages:{type:[Object,Array],default:()=>{}},responsiveClass:{type:String,default:""}},emits:["click"],setup(s,{emit:a}){const t=s;function o(k){return fe(k,"YYYY-MM-DD").diff(fe(),"days")}function i(k){a("click",k)}function p(k,V,b){let U=0;return Object.keys(k).forEach(G=>{(V===null||parseInt(V)===parseInt(G))&&(U+=k[G].purchaseData[b])}),U}function m(k){return k===1?S.value.appointment_booked:S.value.appointments_booked}function r(k){let V=k.packageData.sharedCapacity?k.packageData.sharedCount:p(k.services,null,"count"),b=k.packageData.sharedCapacity?k.packageData.sharedTotal:p(k.services,null,"total");return`${b-V}/${b} ${m(b-V)}`}const u=_("settings");let d=_("amCustomize");const y=_("labels"),F=_("localLanguage");let $=g(()=>u.general.usedLanguages.includes(F.value)),S=g(()=>{let k=ke(be({},y)),V=d.value.packagesList.translations;return V&&Object.keys(V).forEach(b=>{V[b][F.value]&&$.value?k[b]=V[b][F.value]:V[b].default&&(k[b]=V[b].default)}),k}),I=_("amColors"),D=g(()=>({"--am-c-sc-bgr":I.value.colorMainBgr,"--am-c-sc-bgr-op15":x(I.value.colorMainText,.15),"--am-c-sc-text":I.value.colorMainText,"--am-c-sc-text-op80":x(I.value.colorMainText,.8),"--am-c-sc-text-op60":x(I.value.colorMainText,.6),"--am-c-sc-warning-op50":x(I.value.colorWarning,.5)}));return(k,V)=>e(t).packages.length?(n(!0),c(ae,{key:0},pe(e(t).packages,b=>(n(),c("div",{key:b[0],style:ce(e(D)),class:H(["am-sc",{"am-sc__canceled":b[1].packageData.status==="canceled"}])},[l("div",{class:H(["am-sc__top",s.responsiveClass])},[l("div",ki,[l("div",xi,v(b[1].packageData.name),1),b[1].packageData.end?(n(),c("div",Ci,v(e(S).package_book_expire)+" "+v(e(Me)(b[1].packageData.end.split(" ")[0])),1)):(n(),c("div",Ti,v(`${e(S).package_book_expiration} ${e(S).package_book_unlimited}`),1))]),l("div",{class:H(["am-sc__top-right",s.responsiveClass]),onClick:U=>i(b[0])},[l("div",Pi,v(r(b[1])),1),Li],10,$i)],2),b[1].packageData.end&&b[1].packageData.status!=="canceled"?(n(),c(ae,{key:0},[o(b[1].packageData.end.split(" ")[0])>0?(n(),c("div",wi,[l("span",Si,[Di,de(" "+v(`${e(S).package_deal_expire_in} ${o(b[1].packageData.end.split(" ")[0])} ${e(S).expires_days}, ${e(S).appointments_deal_expire}`),1)])])):T("",!0)],64)):T("",!0)],6))),128)):(n(),W(Tt,{key:1,heading:e(S).no_pack_found,text:e(S).have_no_pack},null,8,["heading","text"]))}});const Oi=l("span",{class:"am-icon-checkmark-circle-full"},null,-1),zi={class:"am-cappa__back"},Bi={class:"am-cappa__heading-left"},Ii={key:0,class:"am-cappa__img-name"},Ei={class:"am-cappa__info"},Ai={class:"am-cappa__name"},ji={key:0,class:"am-cappa__date"},Ni={key:1,class:"am-cappa__date"},Vi={key:2,class:"am-cappa__capacity"},Yi={class:"am-cappa__service-heading"},Ui={class:"am-cappa__service-right"},Wi={key:0,class:"am-cappa__service-img__name"},qi={class:"am-cappa__service-info"},Zi={class:"am-cappa__service-name"},Ri={key:0,class:"am-cappa__service-capacity"},Hi={name:"CabinetPackageAppointmentsList",key:"packagesList"},Ji=Object.assign(Hi,{props:{data:{type:[Object,Array],default:()=>{}},responsiveClass:{type:String,default:""},pageWidth:{type:Number}},emits:["goBack","booked","canceled","cancelError"],setup(s,{emit:a}){const t=s;let o=Ce(),i=g(()=>o.getters.getSettings),p=vt({components:{IconComponent:Ae},template:'<IconComponent icon="arrow-left"></IconComponent>'}),{selectedPackageCustomerId:m}=_("packageSelection"),r=g(()=>o.getters["entities/getPackage"](t.data.packageData.id)),u=g(()=>r.value.bookable.find(f=>parseInt(f.service.id)===parseInt(D.value))),d=h(null),y=h(null),F=g(()=>{let f=o.getters["entities/getEntitiesRelations"],C=o.getters["entities/getUnfilteredEmployees"],E=[];if(u.value){if(y.value)Object.keys(f).forEach(z=>{k.value&&k.value.serviceId in f[z]&&f[z][parseInt(k.value.serviceId)].indexOf(y.value)!==-1&&E.push(parseInt(z))});else{let z=[];if(u.value.locations.length)z=u.value.locations.map(_e=>_e.id);else for(let _e in f)u.value.service.id in f[_e]&&(z=z.concat(f[_e][u.value.service.id]));for(let _e in f)u.value.service.id in f[_e]&&z.forEach(je=>{f[_e][u.value.service.id].indexOf(je)!==-1&&E.push(parseInt(_e))})}let J=u.value.providers.length?u.value.providers.map(z=>z.id):C.map(z=>z.id);return C.filter(z=>J.indexOf(z.id)!==-1&&E.indexOf(z.id)!==-1&&(o.getters["entities/getShowHidden"]||z.status==="visible"))}return[]}),$=g(()=>{let f=o.getters["entities/getEntitiesRelations"],C=o.getters["entities/getUnfilteredLocations"],E=[];if(u.value){if(d.value)E=f[d.value][u.value.service.id];else{let z=[];if(u.value.providers.length)z=u.value.providers.map(_e=>_e.id);else for(let _e in f)u.value.service.id in f[_e]&&z.push(parseInt(_e));for(let _e in f)u.value.service.id in f[_e]&&z.indexOf(parseInt(_e))!==-1&&(E=E.concat(f[_e][u.value.service.id]))}let J=u.value.locations.length?u.value.locations.map(z=>z.id):C.map(z=>z.id);return C.filter(z=>J.indexOf(z.id)!==-1&&E.indexOf(z.id)!==-1&&(o.getters["entities/getShowHidden"]||z.status==="visible"))}return[]}),S=g(()=>{let f=[];return Object.keys(t.data.services).forEach(C=>{Object.keys(t.data.services[C].appointments).forEach(E=>{t.data.services[C].appointments[E].appointments.forEach(J=>{f.push(J)})})}),{type:"package",package:r.value,booking:null,bookable:r.value,paymentId:t.data.packageData.payments.length?t.data.packageData.payments[0].id:null,customer:o.getters["auth/getProfile"],packageCustomerId:parseInt(m.value),packageReservations:f,payments:t.data.packageData.payments,price:t.data.packageData.price,tax:t.data.packageData.tax,coupon:t.data.packageData.coupon,discount:t.data.packageData.discount,end:t.data.packageData.end}}),I=h(!1),D=h(null),k=h(null),V=h(null);Fe(()=>{D.value=Object.keys(t.data.services)[0]});function b(f,C,E){let J=0;return Object.keys(f).forEach(z=>{(C===null||parseInt(C)===parseInt(z))&&(J+=f[z].purchaseData[E])}),J}function U(f){return f===1?se.value.appointment_booked:se.value.appointments_booked}function G(f,C=null){let E=f.packageData.sharedCapacity?f.packageData.sharedCount:b(f.services,C,"count"),J=f.packageData.sharedCapacity?f.packageData.sharedTotal:b(f.services,C,"total");return`${J-E}/${J} ${U(J-E)}`}function Z(f){D.value=f.paneName}function Q(){let f=o.getters["auth/getProfile"],C=o.getters["cabinet/getTimeZone"]?o.getters["cabinet/getTimeZone"]:"UTC",E={serviceId:parseInt(D.value),group:1,timeZone:o.getters["cabinet/getTimeZone"],page:"cabinet"},J=t.data.services[D.value].purchaseData.employeeId?[t.data.services[D.value].purchaseData.employeeId]:r.value.bookable.find(z=>parseInt(z.service.id)===parseInt(D.value)).providers.map(z=>z.id);J.length&&(E.providerIds=J),t.data.services[D.value].purchaseData.locationId&&(E.locationId=t.data.services[D.value].purchaseData.locationId),V.value=E,k.value={type:"appointment",bookings:[{packageCustomerService:{id:t.data.services[D.value].purchaseData.packageCustomerServiceId},customer:{id:f.id,firstName:f.firstName,lastName:f.lastName,email:f.email,phone:f.phone,countryPhoneIso:f.countryPhoneIso,externalId:f.externalId},customerId:f.id,customFields:null,persons:1,extras:[],deposit:0}],serviceId:D.value,locationId:t.data.services[D.value].purchaseData.locitionId,providerId:t.data.services[D.value].purchaseData.employeeId,isGroup:!0,notifyParticipants:i.value.notifications.notifyCustomers?1:0,payment:null,recurring:[],package:[],timeZone:C===""?Intl.DateTimeFormat().resolvedOptions().timeZone:C,utc:C==="",locale:window.localeLanguage[0]}}function K(f){k.value=null,a("booked",f)}let B=h(!1);function O(){B.value=!0,xe.post("/packages/customers/"+parseInt(m.value),{status:"canceled"},De(o)).then(()=>{I.value=!1,a("canceled",{message:se.value.package_purchase_canceled})}).catch(f=>{f.response&&a("cancelError",f.response.data)}).finally(()=>{B.value=!1})}function P(f){a("booked",f)}function w(){a("goBack")}let L=_("amCustomize");const A=_("labels"),R=_("localLanguage");let oe=g(()=>i.value.general.usedLanguages.includes(R.value)),se=g(()=>{let f=ke(be({},A)),C=L.value.packageAppointmentsList.translations;return C&&Object.keys(C).forEach(E=>{C[E][R.value]&&oe.value?f[E]=C[E][R.value]:C[E].default&&(f[E]=C[E].default)}),f});ue("amLabels",se);let Y=g(()=>o.getters["cabinet/getPaymentLinkError"].package),j=h("error"),te=h(se.value.payment_link_error);function ee(){Y.value=!1,o.commit("cabinet/setPaymentLinkError",{value:!1,type:"package"})}function ie(f){let C=ke(be({},A)),E=L.value[f].translations;return E&&Object.keys(E).forEach(J=>{E[J][R.value]&&oe.value?C[J]=E[J][R.value]:E[J].default&&(C[J]=E[J].default)}),C}function le(f){return L.value[f].options}let X=_("amColors"),N=g(()=>({"--am-c-cappa-text":X.value.colorMainText,"--am-c-cappa-bgr":X.value.colorMainBgr,"--am-c-cappa-text-op80":x(X.value.colorMainText,.8),"--am-c-cappa-text-op70":x(X.value.colorMainText,.7),"--am-c-cappa-text-op20":x(X.value.colorMainText,.2),"--am-c-cappa-primary":X.value.colorPrimary}));return(f,C)=>{const E=Et,J=At;return n(),c("div",{class:"am-cappa",style:ce(e(N))},[e(Y)?(n(),W(Ee,{key:0,ref:"alertContainer",type:e(j),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:ee,onTriggerClose:ee},{title:M(()=>[Oi,de(" "+v(e(te)),1)]),_:1},8,["type"])):T("",!0),l("div",zi,[q(he,{"custom-class":"am-cappa__back-btn",icon:e(p),type:e(L).packageAppointmentsList.options.backBtn.buttonType,size:"micro",category:"secondary","icon-only":"",onClick:w},null,8,["icon","type"]),l("span",null,v(e(se).back_btn),1)]),l("div",{class:H(["am-cappa__heading",s.responsiveClass])},[l("div",Bi,[l("div",{class:"am-cappa__img",style:ce(e(t).data.packageData.pictureThumbPath?{backgroundImage:`url(${e(t).data.packageData.pictureThumbPath})`}:{})},[e(t).data.packageData.pictureThumbPath?T("",!0):(n(),c("span",Ii,v(e(pt)(e(t).data.packageData.name)),1)),l("span",{class:"am-cappa__img-color",style:ce({backgroundColor:e(t).data.packageData.color})},null,4)],4),l("div",Ei,[l("div",Ai,v(e(t).data.packageData.name),1),e(t).data.packageData.end?(n(),c("div",ji,v(e(se).package_book_expire)+" "+v(e(Me)(e(t).data.packageData.end.split(" ")[0])),1)):(n(),c("div",Ni,v(`${e(se).package_book_expiration} ${e(se).package_book_unlimited}`),1)),Object.keys(e(t).data.services).length>1?(n(),c("div",Vi,v(G(e(t).data)),1)):T("",!0)])]),l("div",{class:H(["am-cappa__heading-right",s.responsiveClass])},[e(i).roles.allowCustomerCancelPackages&&e(t).data.packageData.status!=="canceled"?(n(),W(he,{key:0,category:"danger",size:"small",class:H(["am-cappa__actions",s.responsiveClass]),type:e(L).packageAppointmentsList.options.cancelBtn.buttonType,onClick:C[0]||(C[0]=()=>{me(I)?I.value=!0:I=!0})},{default:M(()=>[de(v(e(se).cancel),1)]),_:1},8,["class","type"])):T("",!0),e(t).data.packageData.status==="approved"&&e(t).data.packageData.price>0?(n(),W(qt,{key:1,"btn-size":"small",class:H(`am-cappa__actions ${s.responsiveClass}`),type:e(L).packageAppointmentsList.options.payBtn.buttonType,reservation:e(S),bookable:e(r)},null,8,["class","type","reservation","bookable"])):T("",!0)],2)],2),q(J,{modelValue:e(D),"onUpdate:modelValue":C[1]||(C[1]=z=>me(D)?D.value=z:D=z),class:"am-cappa__service",onTabClick:Z},{default:M(()=>[(n(!0),c(ae,null,pe(Object.keys(e(t).data.services),z=>(n(),W(E,{key:z,name:z},{label:M(()=>[l("div",Yi,v(e(t).data.services[z].purchaseData.name),1)]),default:M(()=>[e(D)===z?(n(),c(ae,{key:0},[l("div",{class:H(["am-cappa__service-top",s.responsiveClass])},[l("div",Ui,[l("div",{class:"am-cappa__service-img",style:ce(e(t).data.services[e(D)].purchaseData.pictureThumbPath?{backgroundImage:`url(${e(t).data.services[e(D)].purchaseData.pictureThumbPath})`}:{})},[e(t).data.services[e(D)].purchaseData.pictureThumbPath?T("",!0):(n(),c("span",Wi,v(e(pt)(e(t).data.services[e(D)].purchaseData.name)),1)),l("span",{class:"am-cappa__service-img__color",style:ce({backgroundColor:e(t).data.services[e(D)].purchaseData.color})},null,4)],4),l("div",qi,[l("div",Zi,v(e(t).data.services[e(D)].purchaseData.name),1),e(t).data.packageData.sharedCapacity?T("",!0):(n(),c("div",Ri,v(G(e(t).data,e(D))),1))])]),e(t).data.packageData.status!=="canceled"?(n(),W(he,{key:0,class:H(["am-cappa__service-book",s.responsiveClass]),size:"small",type:e(L).packageAppointmentsList.options.bookBtn.buttonType,disabled:b(e(t).data.services,e(D),"count")===0,onClick:Q},{default:M(()=>[de(v(e(se).book_now),1)]),_:1},8,["class","type","disabled"])):T("",!0)],2),q(Ht,{"grouped-appointments":e(t).data.services[e(D)].appointments,"page-width":s.pageWidth,"responsive-class":s.responsiveClass,"is-package-booking":!0,"step-key":"packageAppointmentsList",onCanceled:P,onBooked:P},null,8,["grouped-appointments","page-width","responsive-class"])],64)):T("",!0)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),q(xt,{loading:e(B),visibility:e(I),title:ie("cancelPackage").cancel_package,description:ie("cancelPackage").confirm_cancel_package,"close-btn-text":ie("cancelPackage").close,"confirm-btn-text":ie("cancelPackage").confirm,"customized-options":le("cancelPackage"),onClose:C[2]||(C[2]=()=>{me(I)?I.value=!1:I=!1}),onConfirm:O},null,8,["loading","visibility","title","description","close-btn-text","confirm-btn-text","customized-options"]),q(Rt,{visibility:e(k)!==null&&!e(k).id,appointment:e(k),employees:e(F),locations:e($),"slots-params":e(V),labels:ie("bookAppointment"),"customized-options":le("bookAppointment"),onClose:C[3]||(C[3]=z=>me(k)?k.value=null:k=null),onSuccess:K,onError:C[4]||(C[4]=()=>{}),onEmployeeSelection:C[5]||(C[5]=z=>me(d)?d.value=z:d=z),onLocationSelection:C[6]||(C[6]=z=>me(y)?y.value=z:y=z)},null,8,["visibility","appointment","employees","locations","slots-params","labels","customized-options"])],4)}}});const Gi=l("span",{class:"am-icon-checkmark-circle-full"},null,-1),Qi={name:"CabinetPackages",key:"packages"},Xi=Object.assign(Qi,{props:{loadBookingsCounter:{type:Number,default:0}},setup(s){const a=s;let t=Ce(),o=h(null),i=h(0),p=_("sidebarCollapsed");window.addEventListener("resize",m);function m(){o.value&&(i.value=o.value.offsetWidth)}Te(p,L=>{L?setTimeout(()=>{r()},1500):setTimeout(()=>{r()},500)});function r(){i.value=o.value.offsetWidth}Fe(()=>{He(()=>{i.value=o.value.offsetWidth})});let u=g(()=>Pe(i.value)),d=h(null),y=h(!1),F=h("success"),$=h("");function S(){y.value=!1,$.value=""}let I=_("cabinetType");t.commit("cabinetFilters/setDates",bt(I.value));let D=g(()=>t.getters["cabinet/getPackageLoading"]),k=h([]),V=h(null);function b(){let L=t.getters["cabinetFilters/getPackages"],A=t.getters["cabinetFilters/getServices"],R=t.getters["cabinetFilters/getProviders"],oe=t.getters["cabinetFilters/getLocations"];k.value=K.value.filter(se=>{let Y=t.getters["entities/getPackageEntities"](se[1].packageData.id);return(A.length===0||A.filter(j=>Y.services.includes(j)).length>0)&&(R.length===0||R.filter(j=>Y.providers.includes(j)).length>0)&&(oe.length===0||oe.filter(j=>Y.locations.includes(j)).length>0)&&(L.length===0||L.filter(j=>Y.packages.includes(j)).length>0)})}function U(L,A,R){let oe=0;return Object.keys(L).forEach(se=>{(A===null||parseInt(A)===parseInt(se))&&(oe+=L[se].purchaseData[R])}),oe}function G(L){let A=U(L.services,null,"count"),R=U(L.services,null,"total");return R-A===R}function Z(L){t.commit("cabinet/setPackageLoading",!0);let A=t.getters["cabinet/getTimeZone"],R=JSON.parse(JSON.stringify(t.getters["cabinetFilters/getPackagesFilters"]));R.timeZone=A,R.source="cabinet-"+I.value,R.activePackages=0,xe.get("/appointments",ht(Object.assign(De(t),{params:R}))).then(oe=>{let se={};oe.data.data.availablePackageBookings.forEach(X=>{X.packages.forEach(N=>{N.services.forEach(f=>{f.bookings.forEach(C=>{let E=t.getters["entities/getPackage"](N.packageId);if(E&&(C.packageCustomerId in se||(se[C.packageCustomerId]={packageData:{id:E.id,name:E.name,start:C.start,end:C.end,price:C.price,tax:C.tax,coupon:C.coupon,status:C.status,type:"package",payments:C.payments,sharedCapacity:C.sharedCapacity,sharedTotal:C.total,sharedCount:C.count,discount:0,color:E.color,pictureFullPath:E.pictureFullPath,pictureThumbPath:E.pictureThumbPath},services:{}}),!(f.serviceId in se[C.packageCustomerId].services))){let J=t.getters["entities/getService"](f.serviceId);se[C.packageCustomerId].services[f.serviceId]={appointments:{},purchaseData:{packageCustomerServiceId:C.id,total:C.total,count:C.count,employeeId:C.employeeId,locationId:C.locationId,name:J.name,color:J.color,pictureThumbPath:J.pictureThumbPath}}}})})})});let Y=Ut(oe.data.data.appointments,A);Object.keys(Y).forEach(X=>{Y[X].appointments.forEach(N=>{N.bookings.forEach(f=>{let C=f.packageCustomerService.packageCustomer.id;C in se&&(X in se[C].services[N.serviceId].appointments||(se[C].services[N.serviceId].appointments[X]={date:X,appointments:[]}),se[C].services[N.serviceId].appointments[X].appointments.push(N))})})});let j=Object.entries(se).filter(X=>X[1].packageData.status==="canceled"),te=Object.entries(se).filter(X=>X[1].packageData.status!=="canceled"&&G(X[1])),ee=Object.entries(se).filter(X=>X[1].packageData.status!=="canceled"&&!G(X[1])&&X[1].packageData.end===null),ie=Object.entries(se).filter(X=>X[1].packageData.status!=="canceled"&&!G(X[1])&&X[1].packageData.end!==null).sort((X,N)=>fe(X[1].packageData.end,"YYYY-MM-DD HH:mm:ss").diff(fe(N[1].packageData.end,"YYYY-MM-DD HH:mm:ss"),"minutes"));if(k.value=[...ie,...ee,...te,...j],K.value=[...ie,...ee,...te,...j],!(R.packages.length||R.services.length||R.providers.length||R.locations.length)){let X=[],N=[],f=[],C=[];k.value.forEach(E=>{let J=t.getters["entities/getPackageEntities"](E[1].packageData.id);X=X.concat(J.services),N=N.concat(J.providers),f=f.concat(J.locations),C=C.concat(J.packages)}),t.dispatch("cabinetFilters/injectServiceOptions",X.filter((E,J,z)=>z.indexOf(E)===J)),t.dispatch("cabinetFilters/injectProviderOptions",N.filter((E,J,z)=>z.indexOf(E)===J)),t.dispatch("cabinetFilters/injectLocationOptions",f.filter((E,J,z)=>z.indexOf(E)===J)),t.dispatch("cabinetFilters/injectPackagesOptions",C.filter((E,J,z)=>z.indexOf(E)===J))}}).catch(oe=>{console.log(oe)}).finally(()=>{t.commit("cabinet/setPackageLoading",!1),L&&"message"in L&&(y.value=!0,$.value=L.message,o.value&&d.value&&setTimeout(function(){Le(o.value,d.value.$el,0,300)},500))})}function Q(L){y.value=!0,$.value=L.message,F.value="error",o.value&&d.value&&setTimeout(function(){Le(o.value,d.value.$el,0,300)},500)}ue("packageSelection",{selectedPackageCustomerId:V});let K=h([]);Te(()=>a.loadBookingsCounter,()=>{Z()}),Fe(()=>{Z()});let B=g(()=>({list:{template:ye(Mi),props:{packages:k.value,responsiveClass:u.value},handlers:{click:P}},item:{template:ye(Ji),props:{data:V.value?k.value.find(L=>L[0]===V.value)[1]:{},responsiveClass:u.value,pageWidth:i.value},handlers:{goBack:w,booked:Z,canceled:Z,cancelError:Q}}})),O=h("list");function P(L){V.value=L,O.value="item"}function w(){V.value=null,O.value="list"}return(L,A)=>(n(),c("div",{ref_key:"pageContainer",ref:o,class:"am-cap"},[e(y)?(n(),W(Ee,{key:0,ref_key:"alertContainer",ref:d,type:e(F),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:S,onTriggerClose:S},{title:M(()=>[Gi,de(" "+v(e($)),1)]),_:1},8,["type"])):T("",!0),at(q(kt,{"step-key":"packages","responsive-class":e(u),onChangeFilters:b},null,8,["responsive-class"]),[[ha,e(O)==="list"]]),e(D)?(n(),W(Ct,{key:2})):(n(),W(Ie(e(B)[e(O)].template),Ne({key:1},e(B)[e(O)].props,ya(e(B)[e(O)].handlers)),null,16))],512))}});const Ki=l("link",{rel:"preconnect",href:"https://fonts.googleapis.com"},null,-1),er=l("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},null,-1),tr=["href"],ar={class:"am-fs-sb__page-wrapper am-fs-sb__page-wrapper__cabinet"},sr=["onClick"],lr={class:"am-fs-sb__page-icon"},or=l("span",{class:"am-icon-arrow-big-right"},null,-1),nr=[or],ir={key:1,class:"am-fs-sb__page-divider"},rr={class:"am-fs-sb__page-inner"},cr=l("div",{class:"am-fs-sb__page-icon"},[l("span",{class:"am-icon-dashboard"})],-1),ur=l("div",{class:"am-fs-sb__page-divider"},null,-1),dr={class:"am-fs-sb__page-inner"},pr=l("div",{class:"am-fs-sb__page-icon"},[l("span",{class:"am-icon-logout"})],-1),mr={class:"am-caph"},_r={class:"am-caph__text"},gr=l("span",{class:"am-icon-menu"},null,-1),vr=[gr],fr={name:"CustomerPanel"},br=Object.assign(fr,{setup(s){const a=lt().cookies,t=Ce();let o=g(()=>t.getters["auth/getAuthenticated"]);Te(o,f=>{f&&(t.commit("auth/setNewPassword",""),t.commit("auth/setConfirmPassword",""))});let i=h("customer");ue("cabinetType",i);let p=_("licence"),m=h("capc");ue("originKey",m);let r=h(null),{width:u}=ka(r);ue("containerWidth",u);const d=_("settings"),y=g(()=>d.customizedData&&"capc"in d.customizedData?d.customizedData.capc:Ke.capc);ue("amCustomize",y);const F=h(d.customizedData?d.customizedData.fonts:Ke.fonts);ue("amFonts",F);const $=_("labels"),S=_("localLanguage");let I=g(()=>d.general.usedLanguages.includes(S.value)),D=g(()=>{let f=ke(be({},$));return d.customizedData&&Object.keys(y.value).forEach(C=>{if(C!=="colors"&&y.value[C].translations){let E=y.value[C].translations;Object.keys(E).forEach(J=>{E[J][S.value]&&I.value?f[J]=E[J][S.value]:E[J].default&&(f[J]=E[J].default)})}}),f}),k=g(()=>w.value==="packages"?y.value.packagesList.options:y.value[w.value].options),V=h(!1),b=h(!1);ue("sidebarCollapsed",xa(b));let U=h("");Te(b,f=>{f?setTimeout(()=>{U.value="am-collapsed"},1e3):U.value=""});let G=h(null),Z=h(0),Q=g(()=>u.value>480);Fe(()=>{G.value&&setTimeout(()=>{Z.value=G.value.offsetHeight},200)});let K=h(null);Te(u,f=>{clearTimeout(K.value),K.value=setTimeout(()=>{b.value=y.value.sidebar.options.toggle.visibility?y.value.sidebar.options.toggle.visibility:f<=600,V.value=f>481?!1:V.value},200)});const B=_("baseUrls");t.dispatch("entities/getEntities",{types:["employees","categories","locations","packages","entitiesRelations","customFields"],licence:"basic",loadEntities:!0,showHidden:!0});const O=_("shortcodeData");let P=g(()=>t.getters.getReady),w=h(O.value.appointments||!O.value.events?"appointments":"events"),L=h({profile:ye(yl)});(O.value.appointments||!O.value.events)&&(L.value.appointments=ye(fi)),(O.value.events||!O.value.appointments)&&(L.value.events=ye(yi)),(O.value.appointments||!O.value.events)&&(p.isPro||p.isDeveloper)&&(L.value.packages=ye(Xi));const A=h([{key:"profile",icon:"user",pageLabel:D.value.my_profile,label:g(()=>y.value.profile.options.lastName.visibility?`${t.getters["auth/getProfile"].firstName} ${t.getters["auth/getProfile"].lastName}`:`${t.getters["auth/getProfile"].firstName}`)}]);(O.value.appointments||!O.value.events)&&A.value.push({key:"appointments",icon:"service",label:D.value.appointments}),(O.value.events||!O.value.appointments)&&A.value.push({key:"events",icon:"star-outline",label:D.value.events}),(O.value.appointments||!O.value.events)&&(p.isPro||p.isDeveloper)&&A.value.push({key:"packages",icon:"shipment",label:D.value.packages}),ue("sidebarSteps",A),Fe(()=>{R.value=A.value.findIndex(f=>f.key===w.value)});let R=h(0);function oe(f,C){w.value=f.key,R.value=C,t.commit("cabinetFilters/setResetFilters")}function se(f){oe(f.step,f.index),t.commit("cabinetFilters/setResetFilters")}function Y(){t.dispatch("auth/logout")}function j(){V.value=!1,Y()}let te=h(0);function ee(){te.value++}ue("bookingsCounterChanger",{bookingsCounterChanger:ee});const ie=_("timeZone");It(()=>{if(!d.general.showClientTimeZone){let f=ie.value;a.get("ameliaUserTimeZone")&&(f=a.get("ameliaUserTimeZone")),t.commit("cabinet/setTimeZone",f)}t.getters["cabinet/getTimeZone"]||t.commit("cabinet/setTimeZone",Ze())});let le=g(()=>y.value.colors);ue("amColors",le);let X=g(()=>({"--am-c-primary":le.value.colorPrimary,"--am-c-success":le.value.colorSuccess,"--am-c-error":le.value.colorError,"--am-c-warning":le.value.colorWarning,"--am-c-main-bgr":le.value.colorMainBgr,"--am-c-main-heading-text":le.value.colorMainHeadingText,"--am-c-main-text":le.value.colorMainText,"--am-c-sb-bgr":le.value.colorSbBgr,"--am-c-sb-text":le.value.colorSbText,"--am-c-inp-bgr":le.value.colorInpBgr,"--am-c-inp-border":le.value.colorInpBorder,"--am-c-inp-text":le.value.colorInpText,"--am-c-inp-placeholder":le.value.colorInpPlaceHolder,"--am-c-drop-bgr":le.value.colorDropBgr,"--am-c-drop-text":le.value.colorDropText,"--am-c-btn-prim":le.value.colorBtnPrim,"--am-c-btn-prim-text":le.value.colorBtnPrimText,"--am-c-btn-sec":le.value.colorBtnSec,"--am-c-btn-sec-text":le.value.colorBtnSecText,"--am-c-btn-danger":le.value.colorBtnDanger,"--am-c-btn-danger-text":le.value.colorBtnDangerText,"--am-c-skeleton-op20":x(le.value.colorMainText,.2),"--am-c-skeleton-op60":x(le.value.colorMainText,.6),"--am-c-skeleton-sb-op20":x(le.value.colorSbText,.2),"--am-c-skeleton-sb-op60":x(le.value.colorSbText,.6),"--am-c-scroll-op30":x(le.value.colorPrimary,.3),"--am-c-scroll-op10":x(le.value.colorPrimary,.1),"--am-font-family":F.value.fontFamily,"--am-rad-input":"6px","--am-fs-input":"15px","--am-mw-main":Q.value?b.value?"858px":"1024px":"520px","--am-brad-main":Q.value?"0 0.5rem 0.5rem 0":"0.5rem"})),N=g(()=>({"--am-c-msd-bgr":le.value.colorSbBgr,"--am-c-msd-text":le.value.colorSbText,"--am-c-msd-text-op05":x(le.value.colorSbText,.05),"--am-c-msd-text-op10":x(le.value.colorSbText,.1),"--am-c-msd-text-op60":x(le.value.colorSbText,.6)}));return(f,C)=>(n(),c(ae,null,[F.value.customFontSelected?T("",!0):(n(),c(ae,{key:0},[Ki,er,l("link",{rel:"stylesheet",type:"text/css",href:`${e(B).wpAmeliaPluginURL}v3/src/assets/scss/common/fonts/font.css`,media:"all"},null,8,tr)],64)),l("div",{id:"amelia-container",ref_key:"ameliaContainer",ref:r,class:H(["am-cap__wrapper",[{"am-collapsed":e(b)},{"am-auth":!e(o)}]]),style:ce(e(X))},[e(o)?T("",!0):(n(),W(ul,{key:0})),e(o)?(n(),c(ae,{key:1},[e(Q)?(n(),W(Ca,{key:0,class:H(["am-fs-sb",{"am-collapsed":e(b)}]),style:ce({width:e(b)?"72px":"240px",paddingBottom:`${e(Z)+16}px`})},{"step-list":M(()=>[l("div",ar,[(n(!0),c(ae,null,pe(A.value,(E,J)=>(n(),c(ae,{key:E.key},[E.key!=="packages"||e(t).getters["entities/getPackages"].length?(n(),c("div",{key:0,class:H(["am-fs-sb__page",{selected:e(w)===E.key}]),onClick:z=>oe(E,J)},[l("div",{class:H(["am-fs-sb__page-inner",{"am-collapsed":e(b)}])},[l("div",lr,[l("span",{class:H(`am-icon-${E.icon}`)},null,2)]),q(Be,{name:"fade"},{default:M(()=>[e(b)?T("",!0):(n(),c("p",{key:0,class:H(["am-fs-sb__page-heading",e(U)])},v(E.label),3))]),_:2},1024),q(Be,{name:"fade"},{default:M(()=>[e(b)?T("",!0):(n(),c("div",{key:0,class:H(["am-fs-sb__page-indicator",e(U)])},nr,2))]),_:1})],2)],10,sr)):T("",!0),J===0?(n(),c("div",ir)):T("",!0)],64))),128))])]),"support-info":M(()=>[l("div",{ref_key:"sidebarFooterRef",ref:G,class:"am-fs-sb__footer"},[l("div",{class:"am-fs-sb__page",onClick:C[0]||(C[0]=E=>me(b)?b.value=!e(b):b=!e(b))},[l("div",rr,[cr,q(Be,{name:"fade"},{default:M(()=>[e(b)?T("",!0):(n(),c("p",{key:0,class:H(["am-fs-sb__page-heading",e(U)])},v(e(D).toggle_sidebar),3))]),_:1})])]),ur,l("div",{class:"am-fs-sb__page",onClick:Y},[l("div",dr,[pr,q(Be,{name:"fade"},{default:M(()=>[e(b)?T("",!0):(n(),c("p",{key:0,class:H(["am-fs-sb__page-heading",e(U)])},v(e(D).log_out),3))]),_:1})])])],512)]),_:1},8,["class","style"])):T("",!0),q(Ta,{"max-width":786,"old-responsive":!1},{header:M(()=>[q(Fa,{ready:e(P)},{default:M(()=>[l("div",mr,[l("div",_r,v(A.value[e(R)].key==="profile"?A.value[e(R)].pageLabel:A.value[e(R)].label),1),e(Q)?T("",!0):(n(),c("div",{key:0,class:"am-caph__menu",onClick:C[1]||(C[1]=()=>me(V)?V.value=!e(V):V=!e(V))},vr)),e(Q)&&e(w)!=="profile"&&e(k).timeZone.visibility?(n(),W(mt,{key:1})):T("",!0),q(ws,{"menu-items":A.value,monitor:e(w),visibility:e(V),"custom-css":e(N),"customized-labels":e(D),position:"right",width:240,"onUpdate:visibility":C[2]||(C[2]=E=>me(V)?V.value=E:V=E),onClick:se,onLogout:j},null,8,["menu-items","monitor","visibility","custom-css","customized-labels"])])]),_:1},8,["ready"])]),step:M(()=>[(n(),W(Ie(e(L)[e(w)]),{class:"am-fs__main-content","load-bookings-counter":e(te)},null,8,["load-bookings-counter"]))]),_:1})],64)):T("",!0)],6)],64))}});var Pr=Object.freeze(Object.defineProperty({__proto__:null,default:br},Symbol.toStringTag,{value:"Module"}));export{Pr as C,Ia as _,Ya as a,cs as b,ds as c,$r as d,Fa as e,ws as f,Tr as g,Cr as h,we as i,Oe as j,wa as k,Vt as u};
